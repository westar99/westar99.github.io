<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>CHAI JEHYUNG</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="CHAI JEHYUNG"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="CHAI JEHYUNG"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="프로젝트 개요 강의명 : 2022년 K-디지털 직업훈련(Training) 사업 - AI데이터플랫폼을 활용한 빅데이터 분석전문가 과정 교과목명 : 빅데이터 분석 및 시각화, AI개발 기초, 인공지능 프로그래밍 프로젝트 주제 : 캐글 대회 Bike Sharing Demand 데이터를 활용한 수요 예측 대회 프로젝트 마감일 : 2022년 7월 19일 화요일 수강"><meta property="og:type" content="blog"><meta property="og:title" content="CHAI JEHYUNG"><meta property="og:url" content="https://westar99.github.io/2022/07/12/bikesd_220711/"><meta property="og:site_name" content="CHAI JEHYUNG"><meta property="og:description" content="프로젝트 개요 강의명 : 2022년 K-디지털 직업훈련(Training) 사업 - AI데이터플랫폼을 활용한 빅데이터 분석전문가 과정 교과목명 : 빅데이터 분석 및 시각화, AI개발 기초, 인공지능 프로그래밍 프로젝트 주제 : 캐글 대회 Bike Sharing Demand 데이터를 활용한 수요 예측 대회 프로젝트 마감일 : 2022년 7월 19일 화요일 수강"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://westar99.github.io/images/bikesd_220711/image.png"><meta property="og:image" content="https://westar99.github.io/images/bikesd_220711/output_19_0.png"><meta property="og:image" content="https://westar99.github.io/images/bikesd_220711/output_22_0.png"><meta property="og:image" content="https://westar99.github.io/images/bikesd_220711/output_24_0.png"><meta property="og:image" content="https://westar99.github.io/images/bikesd_220711/output_26_1.png"><meta property="og:image" content="https://westar99.github.io/images/bikesd_220711/output_28_0.png"><meta property="og:image" content="https://westar99.github.io/images/bikesd_220711/output_30_0.png"><meta property="og:image" content="https://westar99.github.io/images/bikesd_220711/output_34_1.png"><meta property="og:image" content="https://westar99.github.io/images/bikesd_220711/output_35_1.png"><meta property="og:image" content="https://westar99.github.io/images/bikesd_220711/output_38_0.png"><meta property="og:image" content="https://westar99.github.io/images/bikesd_220711/output_41_0.png"><meta property="og:image" content="https://westar99.github.io/images/bikesd_220711/output_42_0.png"><meta property="og:image" content="https://westar99.github.io/images/bikesd_220711/output_43_0.png"><meta property="og:image" content="https://westar99.github.io/images/bikesd_220711/output_44_0.png"><meta property="og:image" content="https://westar99.github.io/images/bikesd_220711/output_46_0.png"><meta property="og:image" content="https://westar99.github.io/images/bikesd_220711/output_49_0.png"><meta property="og:image" content="https://westar99.github.io/images/bikesd_220711/output_77_0.png"><meta property="article:published_time" content="2022-07-12T07:06:22.000Z"><meta property="article:modified_time" content="2022-07-12T07:19:00.618Z"><meta property="article:author" content="John Doe"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/images/bikesd_220711/image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://westar99.github.io/2022/07/12/bikesd_220711/"},"headline":"CHAI JEHYUNG","image":["https://westar99.github.io/images/bikesd_220711/image.png","https://westar99.github.io/images/bikesd_220711/output_19_0.png","https://westar99.github.io/images/bikesd_220711/output_22_0.png","https://westar99.github.io/images/bikesd_220711/output_24_0.png","https://westar99.github.io/images/bikesd_220711/output_26_1.png","https://westar99.github.io/images/bikesd_220711/output_28_0.png","https://westar99.github.io/images/bikesd_220711/output_30_0.png","https://westar99.github.io/images/bikesd_220711/output_34_1.png","https://westar99.github.io/images/bikesd_220711/output_35_1.png","https://westar99.github.io/images/bikesd_220711/output_38_0.png","https://westar99.github.io/images/bikesd_220711/output_41_0.png","https://westar99.github.io/images/bikesd_220711/output_42_0.png","https://westar99.github.io/images/bikesd_220711/output_43_0.png","https://westar99.github.io/images/bikesd_220711/output_44_0.png","https://westar99.github.io/images/bikesd_220711/output_46_0.png","https://westar99.github.io/images/bikesd_220711/output_49_0.png","https://westar99.github.io/images/bikesd_220711/output_77_0.png"],"datePublished":"2022-07-12T07:06:22.000Z","dateModified":"2022-07-12T07:19:00.618Z","author":{"@type":"Person","name":"John Doe"},"publisher":{"@type":"Organization","name":"CHAI JEHYUNG","logo":{"@type":"ImageObject","url":"https://westar99.github.io/img/logo.svg"}},"description":"프로젝트 개요 강의명 : 2022년 K-디지털 직업훈련(Training) 사업 - AI데이터플랫폼을 활용한 빅데이터 분석전문가 과정 교과목명 : 빅데이터 분석 및 시각화, AI개발 기초, 인공지능 프로그래밍 프로젝트 주제 : 캐글 대회 Bike Sharing Demand 데이터를 활용한 수요 예측 대회 프로젝트 마감일 : 2022년 7월 19일 화요일 수강"}</script><link rel="canonical" href="https://westar99.github.io/2022/07/12/bikesd_220711/"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 6.2.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="CHAI JEHYUNG" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2022-07-12T07:06:22.000Z" title="2022. 7. 12. 오후 4:06:22">2022-07-12</time></span><span class="level-item">Updated&nbsp;<time dateTime="2022-07-12T07:19:00.618Z" title="2022. 7. 12. 오후 4:19:00">2022-07-12</time></span><span class="level-item">39 minutes read (About 5910 words)</span></div></div><div class="content"><h2 id="프로젝트-개요"><a href="#프로젝트-개요" class="headerlink" title="프로젝트 개요"></a>프로젝트 개요</h2><ul>
<li>강의명 : 2022년 K-디지털 직업훈련(Training) 사업 - AI데이터플랫폼을 활용한 빅데이터 분석전문가 과정</li>
<li>교과목명 : 빅데이터 분석 및 시각화, AI개발 기초, 인공지능 프로그래밍</li>
<li>프로젝트 주제 : 캐글 대회 Bike Sharing Demand 데이터를 활용한 수요 예측 대회</li>
<li>프로젝트 마감일 : 2022년 7월 19일 화요일</li>
<li>수강생명 : 채제형</li>
</ul>
<p><img src="/images/bikesd_220711/image.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> google.colab <span class="keyword">import</span> drive </span><br><span class="line">drive.mount(<span class="string">&quot;/content/drive&quot;</span>)</span><br></pre></td></tr></table></figure>

<pre><code>Drive already mounted at /content/drive; to attempt to forcibly remount, call drive.mount(&quot;/content/drive&quot;, force_remount=True).
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># This Python 3 environment comes with many helpful analytics libraries installed</span></span><br><span class="line"><span class="comment"># It is defined by the kaggle/python Docker image: https://github.com/kaggle/docker-python</span></span><br><span class="line"><span class="comment"># For example, here&#x27;s several helpful packages to load</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np <span class="comment"># linear algebra</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd <span class="comment"># data processing, CSV file I/O (e.g. pd.read_csv)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Input data files are available in the read-only &quot;../input/&quot; directory</span></span><br><span class="line"><span class="comment"># For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">for</span> dirname, _, filenames <span class="keyword">in</span> os.walk(<span class="string">&#x27;/kaggle/input&#x27;</span>):</span><br><span class="line">    <span class="keyword">for</span> filename <span class="keyword">in</span> filenames:</span><br><span class="line">        <span class="built_in">print</span>(os.path.join(dirname, filename))</span><br><span class="line"></span><br><span class="line"><span class="comment"># You can write up to 20GB to the current directory (/kaggle/working/) that gets preserved as output when you create a version using &quot;Save &amp; Run All&quot; </span></span><br><span class="line"><span class="comment"># You can also write temporary files to /kaggle/temp/, but they won&#x27;t be saved outside of the current session</span></span><br></pre></td></tr></table></figure>

<h2 id="STEP-1-필수-라이브러리-불러오기"><a href="#STEP-1-필수-라이브러리-불러오기" class="headerlink" title="STEP 1. 필수 라이브러리 불러오기"></a>STEP 1. 필수 라이브러리 불러오기</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd <span class="comment"># 데이터 가공</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np <span class="comment"># 수치 연산</span></span><br><span class="line"><span class="keyword">import</span> matplotlib <span class="keyword">as</span> mpl <span class="comment"># 시각화 </span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt </span><br><span class="line">%matplotlib inline</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns <span class="comment"># 시각화 </span></span><br><span class="line"><span class="keyword">import</span> sklearn <span class="comment"># 머신러닝</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 버전 확인</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;pandas version :&quot;</span>, pd.__version__)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;numpy version :&quot;</span>, np.__version__)</span><br></pre></td></tr></table></figure>

<pre><code>pandas version : 1.3.5
numpy version : 1.21.6
</code></pre>
<h2 id="STEP-2-데이터-불러오기"><a href="#STEP-2-데이터-불러오기" class="headerlink" title="STEP 2. 데이터 불러오기"></a>STEP 2. 데이터 불러오기</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">DATA_PATH = <span class="string">&#x27;/content/drive/MyDrive/Colab Notebooks/Human_ai/lecture/bike/&#x27;</span></span><br><span class="line">train = pd.read_csv(DATA_PATH +<span class="string">&#x27;train.csv&#x27;</span>)</span><br><span class="line">test = pd.read_csv(DATA_PATH + <span class="string">&#x27;test.csv&#x27;</span>)</span><br><span class="line">submission = pd.read_csv(DATA_PATH + <span class="string">&#x27;sampleSubmission.csv&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;데이터 불러오기 완료!~&quot;</span>)</span><br></pre></td></tr></table></figure>

<pre><code>데이터 불러오기 완료!~
</code></pre>
<h2 id="STEP-3-데이터-둘러보기"><a href="#STEP-3-데이터-둘러보기" class="headerlink" title="STEP 3.데이터 둘러보기"></a>STEP 3.데이터 둘러보기</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">train.shape, test.shape</span><br></pre></td></tr></table></figure>




<pre><code>((10886, 12), (6493, 9))
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">train.info() <span class="comment"># 12개의 변수</span></span><br></pre></td></tr></table></figure>

<pre><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 10886 entries, 0 to 10885
Data columns (total 12 columns):
 #   Column      Non-Null Count  Dtype  
---  ------      --------------  -----  
 0   datetime    10886 non-null  object 
 1   season      10886 non-null  int64  
 2   holiday     10886 non-null  int64  
 3   workingday  10886 non-null  int64  
 4   weather     10886 non-null  int64  
 5   temp        10886 non-null  float64
 6   atemp       10886 non-null  float64
 7   humidity    10886 non-null  int64  
 8   windspeed   10886 non-null  float64
 9   casual      10886 non-null  int64  
 10  registered  10886 non-null  int64  
 11  count       10886 non-null  int64  
dtypes: float64(3), int64(8), object(1)
memory usage: 1020.7+ KB
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">test.info()</span><br></pre></td></tr></table></figure>

<pre><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 6493 entries, 0 to 6492
Data columns (total 9 columns):
 #   Column      Non-Null Count  Dtype  
---  ------      --------------  -----  
 0   datetime    6493 non-null   object 
 1   season      6493 non-null   int64  
 2   holiday     6493 non-null   int64  
 3   workingday  6493 non-null   int64  
 4   weather     6493 non-null   int64  
 5   temp        6493 non-null   float64
 6   atemp       6493 non-null   float64
 7   humidity    6493 non-null   int64  
 8   windspeed   6493 non-null   float64
dtypes: float64(3), int64(5), object(1)
memory usage: 456.7+ KB
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">target = train[<span class="string">&#x27;count&#x27;</span>] <span class="comment"># 타겟변수 확인</span></span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sum</span>(train.duplicated())<span class="comment"># 데이터 중복은 없어보인다.</span></span><br></pre></td></tr></table></figure>




<pre><code>0
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">train.isnull().<span class="built_in">sum</span>()<span class="comment"># 결측치는 없어 보인다.</span></span><br></pre></td></tr></table></figure>




<pre><code>datetime      0
season        0
holiday       0
workingday    0
weather       0
temp          0
atemp         0
humidity      0
windspeed     0
casual        0
registered    0
count         0
dtype: int64
</code></pre>
<h1 id="변수의-내용을-파악해-보면"><a href="#변수의-내용을-파악해-보면" class="headerlink" title="변수의 내용을 파악해 보면"></a>변수의 내용을 파악해 보면</h1><ul>
<li>datetime     시간별 날자(-&gt;수치화 시킬 필요가 있다)</li>
<li>season       계절 :봄(1)여름(2)가을(3)겨울(4)</li>
<li>holiday       휴일</li>
<li>workingday    평일 -&gt; 평일도 휴일도 아닌 날이 존재하게 된다.이를 주말로 정의하자. </li>
<li>weather       날씨 : 맑음(1),흐림(2),작은비(3),폭우(4)</li>
<li>temp          (섭씨)온도</li>
<li>atemp         체감온도</li>
<li>humidity      (상대)습도</li>
<li>windspeed     풍속</li>
<li>casual        미등록 사용자 대여수</li>
<li>registered    등록된 사용자 대여수</li>
<li>count         총대여수(미등록자+등록자)</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 비회원(casual)과 회원(registered)의 대여량의 비율을 확인해본다.</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;미등록자수의 비율:&#x27;</span>,<span class="built_in">round</span>((train[<span class="string">&#x27;casual&#x27;</span>].<span class="built_in">sum</span>()/train[<span class="string">&#x27;count&#x27;</span>].<span class="built_in">sum</span>())*<span class="number">100</span>,<span class="number">2</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;등록자수의 비율:&#x27;</span>,<span class="built_in">round</span>((train[<span class="string">&#x27;registered&#x27;</span>].<span class="built_in">sum</span>()/train[<span class="string">&#x27;count&#x27;</span>].<span class="built_in">sum</span>())*<span class="number">100</span>,<span class="number">2</span>))</span><br></pre></td></tr></table></figure>

<pre><code>미등록자수의 비율: 18.8
등록자수의 비율: 81.2
</code></pre>
<h2 id="STEP-4-탐색적-자료-분석"><a href="#STEP-4-탐색적-자료-분석" class="headerlink" title="STEP 4. 탐색적 자료 분석"></a>STEP 4. 탐색적 자료 분석</h2><ul>
<li><p>복제본 사용</p>
<ul>
<li>시간변수를 수치형 변수로 변환</li>
</ul>
</li>
<li><p>시각화</p>
<ul>
<li>타겟 변수의 상태 확인</li>
<li>수치형 변수와 대여량 간의 관계(온도,체감온도,습도,풍속)</li>
<li>범주형 변수와 대여량 간의 관계(시간,날씨,계절,일하는날,휴일)</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">temp_train = train.copy()</span><br><span class="line">temp_test = test.copy()</span><br><span class="line">temp_target = target.copy()<span class="comment"># 복제본 완료</span></span><br><span class="line">temp_train.shape, temp_test.shape, temp_target.shape</span><br></pre></td></tr></table></figure>




<pre><code>((10886, 12), (6493, 9), (10886,))
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 시간관련 변수를 수치형 변수로 바꿔준다.</span></span><br><span class="line">temp_train[<span class="string">&#x27;date&#x27;</span>] = pd.to_datetime(temp_train[<span class="string">&#x27;datetime&#x27;</span>])</span><br><span class="line">temp_train[<span class="string">&#x27;year&#x27;</span>] = temp_train[<span class="string">&#x27;date&#x27;</span>].dt.year</span><br><span class="line">temp_train[<span class="string">&#x27;month&#x27;</span>] = temp_train[<span class="string">&#x27;date&#x27;</span>].dt.month</span><br><span class="line">temp_train[<span class="string">&#x27;day&#x27;</span>] = temp_train[<span class="string">&#x27;date&#x27;</span>].dt.day</span><br><span class="line">temp_train[<span class="string">&#x27;hour&#x27;</span>] = temp_train[<span class="string">&#x27;date&#x27;</span>].dt.hour</span><br><span class="line"><span class="comment">#분과 초는 0값이기에 필요가 없어서 생략함</span></span><br><span class="line">temp_train.head()</span><br></pre></td></tr></table></figure>





  <div id="df-5f3c05a7-4906-4dd1-8371-266fd67341a3">
    <div class="colab-df-container">
      <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>datetime</th>
      <th>season</th>
      <th>holiday</th>
      <th>workingday</th>
      <th>weather</th>
      <th>temp</th>
      <th>atemp</th>
      <th>humidity</th>
      <th>windspeed</th>
      <th>casual</th>
      <th>registered</th>
      <th>count</th>
      <th>date</th>
      <th>year</th>
      <th>month</th>
      <th>day</th>
      <th>hour</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2011-01-01 00:00:00</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>9.84</td>
      <td>14.395</td>
      <td>81</td>
      <td>0.0</td>
      <td>3</td>
      <td>13</td>
      <td>16</td>
      <td>2011-01-01 00:00:00</td>
      <td>2011</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2011-01-01 01:00:00</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>9.02</td>
      <td>13.635</td>
      <td>80</td>
      <td>0.0</td>
      <td>8</td>
      <td>32</td>
      <td>40</td>
      <td>2011-01-01 01:00:00</td>
      <td>2011</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2011-01-01 02:00:00</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>9.02</td>
      <td>13.635</td>
      <td>80</td>
      <td>0.0</td>
      <td>5</td>
      <td>27</td>
      <td>32</td>
      <td>2011-01-01 02:00:00</td>
      <td>2011</td>
      <td>1</td>
      <td>1</td>
      <td>2</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2011-01-01 03:00:00</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>9.84</td>
      <td>14.395</td>
      <td>75</td>
      <td>0.0</td>
      <td>3</td>
      <td>10</td>
      <td>13</td>
      <td>2011-01-01 03:00:00</td>
      <td>2011</td>
      <td>1</td>
      <td>1</td>
      <td>3</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2011-01-01 04:00:00</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>9.84</td>
      <td>14.395</td>
      <td>75</td>
      <td>0.0</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>2011-01-01 04:00:00</td>
      <td>2011</td>
      <td>1</td>
      <td>1</td>
      <td>4</td>
    </tr>
  </tbody>
</table>
</div>
      <button class="colab-df-convert" onclick="convertToInteractive('df-5f3c05a7-4906-4dd1-8371-266fd67341a3')"
              title="Convert this dataframe to an interactive table."
              style="display:none;">

<p>  &lt;svg xmlns&#x3D;”<a target="_blank" rel="noopener" href="http://www.w3.org/2000/svg&quot;">http://www.w3.org/2000/svg&quot;</a> height&#x3D;”24px”viewBox&#x3D;”0 0 24 24”<br>       width&#x3D;”24px”&gt;<br>    <path d="M0 0h24v24H0V0z" fill="none"/><br>    <path d="M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z"/><path d="M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z"/><br>  </svg><br>      </button></p>
  <style>
    .colab-df-container {
      display:flex;
      flex-wrap:wrap;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

<pre><code>  &lt;script&gt;
    const buttonEl =
      document.querySelector(&#39;#df-5f3c05a7-4906-4dd1-8371-266fd67341a3 button.colab-df-convert&#39;);
    buttonEl.style.display =
      google.colab.kernel.accessAllowed ? &#39;block&#39; : &#39;none&#39;;

    async function convertToInteractive(key) &#123;
      const element = document.querySelector(&#39;#df-5f3c05a7-4906-4dd1-8371-266fd67341a3&#39;);
      const dataTable =
        await google.colab.kernel.invokeFunction(&#39;convertToInteractive&#39;,
                                                 [key], &#123;&#125;);
      if (!dataTable) return;

      const docLinkHtml = &#39;Like what you see? Visit the &#39; +
        &#39;&lt;a target=&quot;_blank&quot; href=https://colab.research.google.com/notebooks/data_table.ipynb&gt;data table notebook&lt;/a&gt;&#39;
        + &#39; to learn more about interactive tables.&#39;;
      element.innerHTML = &#39;&#39;;
      dataTable[&#39;output_type&#39;] = &#39;display_data&#39;;
      await google.colab.output.renderOutput(dataTable, element);
      const docLink = document.createElement(&#39;div&#39;);
      docLink.innerHTML = docLinkHtml;
      element.appendChild(docLink);
    &#125;
  &lt;/script&gt;
&lt;/div&gt;
</code></pre>
  </div>





<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 타겟변수(총대여수)를 확인하여 시각화를 해봤다</span></span><br><span class="line">fig, ax = plt.subplots(nrows = <span class="number">1</span>, ncols =<span class="number">2</span>, figsize = (<span class="number">10</span>,<span class="number">6</span>))</span><br><span class="line">sns.histplot(temp_train[<span class="string">&#x27;count&#x27;</span>],ax = ax[<span class="number">0</span>])</span><br><span class="line">sns.histplot(np.log(temp_train[<span class="string">&#x27;count&#x27;</span>]),ax = ax[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">ax[<span class="number">0</span>].set_title(<span class="string">&#x27;Normal Graph&#x27;</span>)</span><br><span class="line">ax[<span class="number">1</span>].set_title(<span class="string">&#x27;Log Graph&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/images/bikesd_220711/output_19_0.png" alt="png"></p>
<p>-&gt; 시각화 결과 왼쪽으로 치우쳐졌기에 로그함수를 이용 정규분포와 비슷하게 만들었다.</p>
<h3 id="1-수치형-변수와-대여량-간의-관계"><a href="#1-수치형-변수와-대여량-간의-관계" class="headerlink" title="1.수치형 변수와 대여량 간의 관계"></a>1.수치형 변수와 대여량 간의 관계</h3><ul>
<li>온도,체감온도,습도,풍속은 연속형 변수로 총대여수와의 관계를 살펴보기 위해 상관계수 히트맵 그래프를 그려본다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">plt.figure(figsize=(<span class="number">12</span>,<span class="number">10</span>))</span><br><span class="line">plt.title(<span class="string">&quot;Weather Correlation of Features&quot;</span>,y= <span class="number">1</span>, size = <span class="number">15</span>)</span><br><span class="line">coorMat = temp_train[[<span class="string">&#x27;temp&#x27;</span>,<span class="string">&#x27;atemp&#x27;</span>,<span class="string">&#x27;humidity&#x27;</span>,<span class="string">&#x27;windspeed&#x27;</span>,<span class="string">&#x27;casual&#x27;</span>,<span class="string">&#x27;registered&#x27;</span>,<span class="string">&#x27;count&#x27;</span>]].corr()</span><br><span class="line">sns.heatmap(coorMat, annot = <span class="literal">True</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/images/bikesd_220711/output_22_0.png" alt="png"></p>
<ul>
<li>총대여수(count)와 상관성을 갖는 값을 나열해보면 온도 및 체감온도(0.39)&gt;습도(-0.32)&gt;풍속(0.1)이였다. 이는 온도 및 체감온도는 총대여수와 정비례하고 습도는 반비례 풍속은 미미한 정비례 관계이다.<ul>
<li>온도와 체감온도는 중복이 된다고 할 수 있다.둘 중 하나는 생략하자.</li>
</ul>
</li>
<li>casual과 registered가 온도,습도에서 차이가 나는 것은 아마도 casual(비회원)이 날씨에 더 민감함을 알 수 있다.</li>
<li>온도, 체감온도, 습도, 풍속의 산점도와 회귀선을 그려 더 구체화 시켜보자.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 산점도 플렛</span></span><br><span class="line">plt. rc(<span class="string">&#x27;font&#x27;</span>,size =<span class="number">8</span>)</span><br><span class="line">fig, ax = plt.subplots(nrows = <span class="number">2</span>, ncols = <span class="number">2</span>, figsize= (<span class="number">10</span>,<span class="number">9</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2단계 : 각 개별 그래프 입력</span></span><br><span class="line">sns.regplot(x = <span class="string">&#x27;temp&#x27;</span>, y = <span class="string">&#x27;count&#x27;</span>, data = temp_train, scatter_kws = &#123;<span class="string">&#x27;alpha&#x27;</span>:<span class="number">0.2</span>&#125;, line_kws = &#123;<span class="string">&#x27;color&#x27;</span>:<span class="string">&#x27;red&#x27;</span>&#125;,ax=ax[<span class="number">0</span>,<span class="number">0</span>])</span><br><span class="line">sns.regplot(x = <span class="string">&#x27;atemp&#x27;</span>,y = <span class="string">&#x27;count&#x27;</span>, data = temp_train,scatter_kws = &#123;<span class="string">&#x27;alpha&#x27;</span>:<span class="number">0.2</span>&#125;, line_kws = &#123;<span class="string">&#x27;color&#x27;</span>:<span class="string">&#x27;red&#x27;</span>&#125;, ax=ax[<span class="number">0</span>,<span class="number">1</span>])</span><br><span class="line">sns.regplot(x = <span class="string">&#x27;humidity&#x27;</span>, y = <span class="string">&#x27;count&#x27;</span>, data = temp_train,scatter_kws = &#123;<span class="string">&#x27;alpha&#x27;</span>:<span class="number">0.2</span>&#125;, line_kws = &#123;<span class="string">&#x27;color&#x27;</span>:<span class="string">&#x27;red&#x27;</span>&#125;, ax=ax[<span class="number">1</span>,<span class="number">0</span>])</span><br><span class="line">sns.regplot(x = <span class="string">&#x27;windspeed&#x27;</span>, y = <span class="string">&#x27;count&#x27;</span>, data = temp_train, scatter_kws = &#123;<span class="string">&#x27;alpha&#x27;</span>:<span class="number">0.2</span>&#125;, line_kws = &#123;<span class="string">&#x27;color&#x27;</span>:<span class="string">&#x27;red&#x27;</span>&#125;,ax=ax[<span class="number">1</span>,<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3단계 : 디테일 옵션</span></span><br><span class="line">ax[<span class="number">0</span>, <span class="number">0</span>].set_title(<span class="string">&quot;Temp&quot;</span>)</span><br><span class="line">ax[<span class="number">0</span>, <span class="number">1</span>].set_title(<span class="string">&quot;Atemp&quot;</span>)</span><br><span class="line">ax[<span class="number">1</span>, <span class="number">0</span>].set_title(<span class="string">&quot;Humidity&quot;</span>)</span><br><span class="line">ax[<span class="number">1</span>, <span class="number">1</span>].set_title(<span class="string">&quot;Windspeed&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/images/bikesd_220711/output_24_0.png" alt="png"></p>
<ul>
<li>windspeed에서 풍속이 0인 수치가 많고 약 6까지 수치가 없는 것으로 봐서 6이하를 0으로 표시한 것 같다.</li>
</ul>
<ul>
<li>풍속이 0인 수치를 평균값으로 대체하도록 하자.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plt.figure(figsize=(<span class="number">14</span>,<span class="number">3</span>))</span><br><span class="line">sns.countplot(data = temp_train, x = <span class="string">&quot;windspeed&quot;</span>) <span class="comment"># 윈드스피드의 수치 확인</span></span><br></pre></td></tr></table></figure>




<pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f5ba4f7a850&gt;
</code></pre>
<p><img src="/images/bikesd_220711/output_26_1.png" alt="png"></p>
<h3 id="2-범주형-변수와-총대여수와의-관계"><a href="#2-범주형-변수와-총대여수와의-관계" class="headerlink" title="2.범주형 변수와 총대여수와의 관계"></a>2.범주형 변수와 총대여수와의 관계</h3><ul>
<li>시간(year,month,day,hour)</li>
<li>날씨(weather)</li>
<li>계절(season)</li>
<li>평일(workingday), 휴일(holiday)<br> 를 시각화하자(그래프로 그려보자).</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 시간과 관련 그래프를 그려보자.</span></span><br><span class="line">fig, ax = plt.subplots(nrows = <span class="number">2</span>, ncols = <span class="number">2</span>)</span><br><span class="line">fig.tight_layout()</span><br><span class="line">fig.set_size_inches(<span class="number">10</span>, <span class="number">9</span>)</span><br><span class="line">sns.barplot(x = <span class="string">&#x27;year&#x27;</span>, y = <span class="string">&#x27;count&#x27;</span>, data = temp_train, ax=ax[<span class="number">0</span>,<span class="number">0</span>])</span><br><span class="line">sns.barplot(x = <span class="string">&#x27;month&#x27;</span>,y = <span class="string">&#x27;count&#x27;</span>, data = temp_train, ax=ax[<span class="number">0</span>,<span class="number">1</span>])</span><br><span class="line">sns.barplot(x = <span class="string">&#x27;day&#x27;</span>, y = <span class="string">&#x27;count&#x27;</span>, data = temp_train, ax=ax[<span class="number">1</span>,<span class="number">0</span>])</span><br><span class="line">sns.barplot(x = <span class="string">&#x27;hour&#x27;</span>, y = <span class="string">&#x27;count&#x27;</span>, data = temp_train, ax=ax[<span class="number">1</span>,<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">ax[<span class="number">0</span>, <span class="number">0</span>].set_title(<span class="string">&quot;Rental Amounts by Year&quot;</span>)</span><br><span class="line">ax[<span class="number">0</span>, <span class="number">1</span>].set_title(<span class="string">&quot;Rental Amounts by month&quot;</span>)</span><br><span class="line">ax[<span class="number">1</span>, <span class="number">0</span>].set_title(<span class="string">&quot;Rental Amounts by day&quot;</span>)</span><br><span class="line">ax[<span class="number">1</span>, <span class="number">1</span>].set_title(<span class="string">&quot;Rental Amounts by hour&quot;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/images/bikesd_220711/output_28_0.png" alt="png"></p>
<ul>
<li>그래프를 해석해보면 2012년도가 전년에 비해 대여량이 늘었다</li>
<li>겨울보다는 여름에 더 대여량이 높다.</li>
<li>날짜별로는 특별한 차이가 없기에 데이터로서 가치가 없다(제거)</li>
<li>출퇴근 시간으로 보이는 오전 8시와 오후 5-6시에 대여량이 높다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 날씨 관련 그래프를 그려보자.</span></span><br><span class="line">fig, ax = plt.subplots(nrows = <span class="number">1</span>, ncols = <span class="number">3</span>,figsize=(<span class="number">10</span>,<span class="number">3</span>))</span><br><span class="line">fig.tight_layout()</span><br><span class="line">sns.barplot(x = <span class="string">&#x27;weather&#x27;</span>, y = <span class="string">&#x27;casual&#x27;</span>, data = temp_train, ax=ax[<span class="number">0</span>])</span><br><span class="line">sns.barplot(x = <span class="string">&#x27;weather&#x27;</span>,y = <span class="string">&#x27;registered&#x27;</span>, data = temp_train, ax=ax[<span class="number">1</span>])</span><br><span class="line">sns.barplot(x = <span class="string">&#x27;weather&#x27;</span>, y = <span class="string">&#x27;count&#x27;</span>, data = temp_train, ax=ax[<span class="number">2</span>])</span><br><span class="line"></span><br><span class="line">ax[<span class="number">0</span>].set_title(<span class="string">&quot;Causal&quot;</span>)</span><br><span class="line">ax[<span class="number">1</span>].set_title(<span class="string">&quot;Registered&quot;</span>)</span><br><span class="line">ax[<span class="number">2</span>].set_title(<span class="string">&quot;Count=C+R&quot;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/images/bikesd_220711/output_30_0.png" alt="png"></p>
<p>그래프가 이상하다. 안좋은 날씨 데이터(4)는 적은데 높게 나와있다. 평균치로 나타냈기 때문일 것이다.<br>이를 해결하기 위해 y축을 합계로 계산해보자.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(temp_train.groupby(<span class="string">&#x27;weather&#x27;</span>)[[<span class="string">&#x27;datetime&#x27;</span>]].count()/<span class="built_in">len</span>(temp_train))*<span class="number">100</span></span><br></pre></td></tr></table></figure>





  <div id="df-343e42f8-4a2f-4ca7-b2b0-ab2b95d24e1f">
    <div class="colab-df-container">
      <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>datetime</th>
    </tr>
    <tr>
      <th>weather</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>66.066507</td>
    </tr>
    <tr>
      <th>2</th>
      <td>26.033437</td>
    </tr>
    <tr>
      <th>3</th>
      <td>7.890869</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.009186</td>
    </tr>
  </tbody>
</table>
</div>
      <button class="colab-df-convert" onclick="convertToInteractive('df-343e42f8-4a2f-4ca7-b2b0-ab2b95d24e1f')"
              title="Convert this dataframe to an interactive table."
              style="display:none;">

<p>  &lt;svg xmlns&#x3D;”<a target="_blank" rel="noopener" href="http://www.w3.org/2000/svg&quot;">http://www.w3.org/2000/svg&quot;</a> height&#x3D;”24px”viewBox&#x3D;”0 0 24 24”<br>       width&#x3D;”24px”&gt;<br>    <path d="M0 0h24v24H0V0z" fill="none"/><br>    <path d="M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z"/><path d="M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z"/><br>  </svg><br>      </button></p>
  <style>
    .colab-df-container {
      display:flex;
      flex-wrap:wrap;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

<pre><code>  &lt;script&gt;
    const buttonEl =
      document.querySelector(&#39;#df-343e42f8-4a2f-4ca7-b2b0-ab2b95d24e1f button.colab-df-convert&#39;);
    buttonEl.style.display =
      google.colab.kernel.accessAllowed ? &#39;block&#39; : &#39;none&#39;;

    async function convertToInteractive(key) &#123;
      const element = document.querySelector(&#39;#df-343e42f8-4a2f-4ca7-b2b0-ab2b95d24e1f&#39;);
      const dataTable =
        await google.colab.kernel.invokeFunction(&#39;convertToInteractive&#39;,
                                                 [key], &#123;&#125;);
      if (!dataTable) return;

      const docLinkHtml = &#39;Like what you see? Visit the &#39; +
        &#39;&lt;a target=&quot;_blank&quot; href=https://colab.research.google.com/notebooks/data_table.ipynb&gt;data table notebook&lt;/a&gt;&#39;
        + &#39; to learn more about interactive tables.&#39;;
      element.innerHTML = &#39;&#39;;
      dataTable[&#39;output_type&#39;] = &#39;display_data&#39;;
      await google.colab.output.renderOutput(dataTable, element);
      const docLink = document.createElement(&#39;div&#39;);
      docLink.innerHTML = docLinkHtml;
      element.appendChild(docLink);
    &#125;
  &lt;/script&gt;
&lt;/div&gt;
</code></pre>
  </div>





<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">W_train = temp_train.groupby(<span class="string">&#x27;weather&#x27;</span>)[[<span class="string">&#x27;count&#x27;</span>]].<span class="built_in">sum</span>().reset_index()</span><br><span class="line">Wc_train = temp_train.groupby(<span class="string">&#x27;weather&#x27;</span>)[[<span class="string">&#x27;casual&#x27;</span>]].<span class="built_in">sum</span>().reset_index()</span><br><span class="line">Wr_train = temp_train.groupby(<span class="string">&#x27;weather&#x27;</span>)[[<span class="string">&#x27;registered&#x27;</span>]].<span class="built_in">sum</span>().reset_index()</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">fig, ax = plt.subplots(nrows = <span class="number">1</span>, ncols = <span class="number">3</span>,figsize=(<span class="number">12</span>,<span class="number">3</span>))</span><br><span class="line"><span class="comment"># fig.tight_layout()</span></span><br><span class="line">sns.barplot(x = <span class="string">&#x27;weather&#x27;</span>, y = <span class="string">&#x27;casual&#x27;</span>, data = Wc_train, ax=ax[<span class="number">0</span>])</span><br><span class="line">sns.barplot(x = <span class="string">&#x27;weather&#x27;</span>,y = <span class="string">&#x27;registered&#x27;</span>, data = Wr_train, ax=ax[<span class="number">1</span>])</span><br><span class="line">sns.barplot(x = <span class="string">&#x27;weather&#x27;</span>, y = <span class="string">&#x27;count&#x27;</span>, data = W_train, ax=ax[<span class="number">2</span>])</span><br><span class="line"></span><br><span class="line">ax[<span class="number">0</span>].set_title(<span class="string">&quot;Causal&quot;</span>)</span><br><span class="line">ax[<span class="number">1</span>].set_title(<span class="string">&quot;Registered&quot;</span>)</span><br><span class="line">ax[<span class="number">2</span>].set_title(<span class="string">&quot;Count=C+R&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>




<pre><code>Text(0.5, 1.0, &#39;Count=C+R&#39;)
</code></pre>
<p><img src="/images/bikesd_220711/output_34_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 계절 관련 그래프를 그려보자</span></span><br><span class="line">fig, ax = plt.subplots(nrows = <span class="number">1</span>, ncols = <span class="number">3</span>,figsize=(<span class="number">12</span>,<span class="number">3</span>))</span><br><span class="line"></span><br><span class="line">sns.barplot(x = <span class="string">&#x27;season&#x27;</span>, y = <span class="string">&#x27;casual&#x27;</span>, data = temp_train, ax=ax[<span class="number">0</span>])</span><br><span class="line">sns.barplot(x = <span class="string">&#x27;season&#x27;</span>,y = <span class="string">&#x27;registered&#x27;</span>, data = temp_train, ax=ax[<span class="number">1</span>])</span><br><span class="line">sns.barplot(x = <span class="string">&#x27;season&#x27;</span>, y = <span class="string">&#x27;count&#x27;</span>, data = temp_train, ax=ax[<span class="number">2</span>])</span><br><span class="line"></span><br><span class="line">ax[<span class="number">0</span>].set_title(<span class="string">&quot;Causal&quot;</span>)</span><br><span class="line">ax[<span class="number">1</span>].set_title(<span class="string">&quot;Registered&quot;</span>)</span><br><span class="line">ax[<span class="number">2</span>].set_title(<span class="string">&quot;Count=C+R&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>




<pre><code>Text(0.5, 1.0, &#39;Count=C+R&#39;)
</code></pre>
<p><img src="/images/bikesd_220711/output_35_1.png" alt="png"></p>
<ul>
<li>season과 month는 비슷한 양상의 그래프이다. 실제로 month를 3개월 단위로 자른 것이기에 비슷한 변수가 머신러닝 모델에 중복해서 들어가면 예측 성는이 안 좋아지므로 변수 season은 생략하는 것이 좋겠다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># workingday와 holyday를 그래프로 그려보자</span></span><br><span class="line"><span class="comment"># 여기서 workingday는 평일 holyday는 공휴일로 봤을 때 둘다 아닌 날은 주말(weekend)로 정의한다.</span></span><br><span class="line">temp_train[<span class="string">&#x27;day_type&#x27;</span>] = <span class="string">&#x27;weekend&#x27;</span></span><br><span class="line">is_holi = (train[<span class="string">&#x27;holiday&#x27;</span>] == <span class="number">1</span>)</span><br><span class="line">is_week = (train[<span class="string">&#x27;workingday&#x27;</span>] == <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">temp_train.loc[(is_holi),<span class="string">&#x27;day_type&#x27;</span>] = <span class="string">&#x27;holiday&#x27;</span></span><br><span class="line">temp_train.loc[(is_week),<span class="string">&#x27;day_type&#x27;</span>] = <span class="string">&#x27;workingday&#x27;</span></span><br><span class="line">work_holi = (temp_train.groupby(<span class="string">&#x27;day_type&#x27;</span>)[[<span class="string">&#x27;casual&#x27;</span>,<span class="string">&#x27;registered&#x27;</span>,<span class="string">&#x27;count&#x27;</span>]].<span class="built_in">sum</span>()/</span><br><span class="line">             temp_train.groupby(<span class="string">&#x27;day_type&#x27;</span>)[[<span class="string">&#x27;casual&#x27;</span>,<span class="string">&#x27;registered&#x27;</span>,<span class="string">&#x27;count&#x27;</span>]].count())</span><br><span class="line">temp_train.head()</span><br></pre></td></tr></table></figure>





  <div id="df-c3150710-c4d4-4b72-8754-d26e6f327bc3">
    <div class="colab-df-container">
      <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>datetime</th>
      <th>season</th>
      <th>holiday</th>
      <th>workingday</th>
      <th>weather</th>
      <th>temp</th>
      <th>atemp</th>
      <th>humidity</th>
      <th>windspeed</th>
      <th>casual</th>
      <th>registered</th>
      <th>count</th>
      <th>date</th>
      <th>year</th>
      <th>month</th>
      <th>day</th>
      <th>hour</th>
      <th>day_type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2011-01-01 00:00:00</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>9.84</td>
      <td>14.395</td>
      <td>81</td>
      <td>0.0</td>
      <td>3</td>
      <td>13</td>
      <td>16</td>
      <td>2011-01-01 00:00:00</td>
      <td>2011</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>weekend</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2011-01-01 01:00:00</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>9.02</td>
      <td>13.635</td>
      <td>80</td>
      <td>0.0</td>
      <td>8</td>
      <td>32</td>
      <td>40</td>
      <td>2011-01-01 01:00:00</td>
      <td>2011</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>weekend</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2011-01-01 02:00:00</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>9.02</td>
      <td>13.635</td>
      <td>80</td>
      <td>0.0</td>
      <td>5</td>
      <td>27</td>
      <td>32</td>
      <td>2011-01-01 02:00:00</td>
      <td>2011</td>
      <td>1</td>
      <td>1</td>
      <td>2</td>
      <td>weekend</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2011-01-01 03:00:00</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>9.84</td>
      <td>14.395</td>
      <td>75</td>
      <td>0.0</td>
      <td>3</td>
      <td>10</td>
      <td>13</td>
      <td>2011-01-01 03:00:00</td>
      <td>2011</td>
      <td>1</td>
      <td>1</td>
      <td>3</td>
      <td>weekend</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2011-01-01 04:00:00</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>9.84</td>
      <td>14.395</td>
      <td>75</td>
      <td>0.0</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>2011-01-01 04:00:00</td>
      <td>2011</td>
      <td>1</td>
      <td>1</td>
      <td>4</td>
      <td>weekend</td>
    </tr>
  </tbody>
</table>
</div>
      <button class="colab-df-convert" onclick="convertToInteractive('df-c3150710-c4d4-4b72-8754-d26e6f327bc3')"
              title="Convert this dataframe to an interactive table."
              style="display:none;">

<p>  &lt;svg xmlns&#x3D;”<a target="_blank" rel="noopener" href="http://www.w3.org/2000/svg&quot;">http://www.w3.org/2000/svg&quot;</a> height&#x3D;”24px”viewBox&#x3D;”0 0 24 24”<br>       width&#x3D;”24px”&gt;<br>    <path d="M0 0h24v24H0V0z" fill="none"/><br>    <path d="M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z"/><path d="M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z"/><br>  </svg><br>      </button></p>
  <style>
    .colab-df-container {
      display:flex;
      flex-wrap:wrap;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

<pre><code>  &lt;script&gt;
    const buttonEl =
      document.querySelector(&#39;#df-c3150710-c4d4-4b72-8754-d26e6f327bc3 button.colab-df-convert&#39;);
    buttonEl.style.display =
      google.colab.kernel.accessAllowed ? &#39;block&#39; : &#39;none&#39;;

    async function convertToInteractive(key) &#123;
      const element = document.querySelector(&#39;#df-c3150710-c4d4-4b72-8754-d26e6f327bc3&#39;);
      const dataTable =
        await google.colab.kernel.invokeFunction(&#39;convertToInteractive&#39;,
                                                 [key], &#123;&#125;);
      if (!dataTable) return;

      const docLinkHtml = &#39;Like what you see? Visit the &#39; +
        &#39;&lt;a target=&quot;_blank&quot; href=https://colab.research.google.com/notebooks/data_table.ipynb&gt;data table notebook&lt;/a&gt;&#39;
        + &#39; to learn more about interactive tables.&#39;;
      element.innerHTML = &#39;&#39;;
      dataTable[&#39;output_type&#39;] = &#39;display_data&#39;;
      await google.colab.output.renderOutput(dataTable, element);
      const docLink = document.createElement(&#39;div&#39;);
      docLink.innerHTML = docLinkHtml;
      element.appendChild(docLink);
    &#125;
  &lt;/script&gt;
&lt;/div&gt;
</code></pre>
  </div>





<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#시각화</span></span><br><span class="line">plt.plot(work_holi)</span><br><span class="line">plt.legend(work_holi.columns)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/images/bikesd_220711/output_38_0.png" alt="png"></p>
<ul>
<li>사용량은 등록자 대여수(registered)가 비등록자 대여수(casual)보다 많다. 평일(workingday)에 등록자 대여수가 가장 높고 비등록자 대여수가 적은 것을 볼 수 있다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 데이터 나누기</span></span><br><span class="line">h1 = temp_train.loc[temp_train[<span class="string">&#x27;day_type&#x27;</span>] == <span class="string">&#x27;workingday&#x27;</span>]</span><br><span class="line">h2 = temp_train.loc[temp_train[<span class="string">&#x27;day_type&#x27;</span>] == <span class="string">&#x27;weekend&#x27;</span>]</span><br><span class="line">h3 = temp_train.loc[temp_train[<span class="string">&#x27;day_type&#x27;</span>] == <span class="string">&#x27;holiday&#x27;</span>]</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 평일에 대해 -시간대별 평균대여량</span></span><br><span class="line">h1_df = h1.groupby(<span class="string">&#x27;hour&#x27;</span>)[[<span class="string">&#x27;casual&#x27;</span>,<span class="string">&#x27;registered&#x27;</span>,<span class="string">&#x27;count&#x27;</span>]].mean()</span><br><span class="line"></span><br><span class="line">plt.figure(figsize=(<span class="number">10</span>,<span class="number">4</span>))</span><br><span class="line">plt.plot(h1_df)</span><br><span class="line">plt.xticks(np.arange(<span class="number">0</span>,<span class="number">25</span>))</span><br><span class="line">plt.legend(h1_df.columns)</span><br><span class="line">plt.title(<span class="string">&#x27;workingday&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/images/bikesd_220711/output_41_0.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 주말에 대해 -시간대별 평균대여량</span></span><br><span class="line">h2_df = h2.groupby(<span class="string">&#x27;hour&#x27;</span>)[[<span class="string">&#x27;casual&#x27;</span>,<span class="string">&#x27;registered&#x27;</span>,<span class="string">&#x27;count&#x27;</span>]].mean()</span><br><span class="line"></span><br><span class="line">plt.figure(figsize=(<span class="number">10</span>,<span class="number">4</span>))</span><br><span class="line">plt.plot(h2_df)</span><br><span class="line">plt.xticks(np.arange(<span class="number">0</span>,<span class="number">25</span>))</span><br><span class="line">plt.legend(h2_df.columns)</span><br><span class="line">plt.title(<span class="string">&#x27;Weekend&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/images/bikesd_220711/output_42_0.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 공휴일에 대해 -시간대별 평균대여량</span></span><br><span class="line">h3_df = h3.groupby(<span class="string">&#x27;hour&#x27;</span>)[[<span class="string">&#x27;casual&#x27;</span>,<span class="string">&#x27;registered&#x27;</span>,<span class="string">&#x27;count&#x27;</span>]].mean()</span><br><span class="line"></span><br><span class="line">plt.figure(figsize=(<span class="number">10</span>,<span class="number">4</span>))</span><br><span class="line">plt.plot(h3_df)</span><br><span class="line">plt.xticks(np.arange(<span class="number">0</span>,<span class="number">25</span>))</span><br><span class="line">plt.legend(h3_df.columns)</span><br><span class="line">plt.title(<span class="string">&#x27;Holiday&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/images/bikesd_220711/output_43_0.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 모든 그래프를 한번에 보면</span></span><br><span class="line">h_all = temp_train.pivot_table(index =<span class="string">&#x27;hour&#x27;</span>,columns = <span class="string">&#x27;day_type&#x27;</span>, values = <span class="string">&#x27;count&#x27;</span>, aggfunc=<span class="string">&#x27;mean&#x27;</span>)</span><br><span class="line">plt.figure(figsize=(<span class="number">10</span>,<span class="number">4</span>))</span><br><span class="line">plt.plot(h_all)</span><br><span class="line">plt.xticks(np.arange(<span class="number">0</span>,<span class="number">25</span>))</span><br><span class="line">plt.legend(h_all.columns)</span><br><span class="line">plt.title(<span class="string">&#x27;All&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/images/bikesd_220711/output_44_0.png" alt="png"></p>
<ul>
<li>평일에는 출퇴근 시간인 오전 8시와 오후 5-6시에 많이 이용되고 주말과 공휴일에는 낮시간에 대다수 이용된다. 공휴일에는 놀러가는 사람이 많은지 출퇴근 시간만큼은 아니지만 많이 이용되는 시간대가 있다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">fig, ax = plt.subplots(nrows = <span class="number">2</span>, ncols = <span class="number">2</span>)</span><br><span class="line">fig.tight_layout()</span><br><span class="line">fig.set_size_inches(<span class="number">10</span>, <span class="number">9</span>)</span><br><span class="line"></span><br><span class="line">sns.boxplot(x = <span class="string">&#x27;weather&#x27;</span>, y = <span class="string">&#x27;count&#x27;</span>, data = temp_train, ax=ax[<span class="number">0</span>,<span class="number">0</span>])</span><br><span class="line">sns.boxplot(x = <span class="string">&#x27;season&#x27;</span>,y = <span class="string">&#x27;count&#x27;</span>, data = temp_train, ax=ax[<span class="number">0</span>,<span class="number">1</span>])</span><br><span class="line">sns.boxplot(x = <span class="string">&#x27;holiday&#x27;</span>, y = <span class="string">&#x27;count&#x27;</span>, data = temp_train, ax=ax[<span class="number">1</span>,<span class="number">0</span>])</span><br><span class="line">sns.boxplot(x = <span class="string">&#x27;workingday&#x27;</span>, y = <span class="string">&#x27;count&#x27;</span>, data = temp_train, ax=ax[<span class="number">1</span>,<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">ax[<span class="number">0</span>, <span class="number">0</span>].set_title(<span class="string">&quot;Box Plot On Count weather&quot;</span>)</span><br><span class="line">ax[<span class="number">0</span>, <span class="number">1</span>].set_title(<span class="string">&quot;Box Plot On Count Across Season&quot;</span>)</span><br><span class="line">ax[<span class="number">1</span>, <span class="number">0</span>].set_title(<span class="string">&quot;Rental Amounts by Holiday&quot;</span>)</span><br><span class="line">ax[<span class="number">1</span>, <span class="number">1</span>].set_title(<span class="string">&quot;Rental Amounts by Workingday&quot;</span>)</span><br><span class="line"></span><br><span class="line">ax[<span class="number">0</span>, <span class="number">1</span>].tick_params(axis = <span class="string">&#x27;x&#x27;</span>, labelrotation=<span class="number">20</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/images/bikesd_220711/output_46_0.png" alt="png"></p>
<ul>
<li>weather 데이터에서 4번은 반드시 처리해야 한다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">temp_train[<span class="string">&#x27;weekday&#x27;</span>] = temp_train[<span class="string">&#x27;date&#x27;</span>].dt.day_name() <span class="comment"># 요일 추출하기</span></span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">fig, ax = plt.subplots(nrows = <span class="number">5</span>)</span><br><span class="line">fig.set_size_inches(<span class="number">12</span>, <span class="number">18</span>)</span><br><span class="line"></span><br><span class="line">sns.pointplot(x = <span class="string">&#x27;hour&#x27;</span>, y = <span class="string">&#x27;count&#x27;</span>, hue = <span class="string">&#x27;workingday&#x27;</span>, data = temp_train, ax = ax[<span class="number">0</span>])</span><br><span class="line">sns.pointplot(x = <span class="string">&#x27;hour&#x27;</span>, y = <span class="string">&#x27;count&#x27;</span>, hue = <span class="string">&#x27;holiday&#x27;</span>, data = temp_train, ax = ax[<span class="number">1</span>])</span><br><span class="line">sns.pointplot(x = <span class="string">&#x27;hour&#x27;</span>, y = <span class="string">&#x27;count&#x27;</span>, hue = <span class="string">&#x27;weekday&#x27;</span>, data = temp_train, ax = ax[<span class="number">2</span>])</span><br><span class="line">sns.pointplot(x = <span class="string">&#x27;hour&#x27;</span>, y = <span class="string">&#x27;count&#x27;</span>, hue = <span class="string">&#x27;season&#x27;</span>, data = temp_train, ax = ax[<span class="number">3</span>])</span><br><span class="line">sns.pointplot(x = <span class="string">&#x27;hour&#x27;</span>, y = <span class="string">&#x27;count&#x27;</span>, hue = <span class="string">&#x27;weather&#x27;</span>, data = temp_train, ax = ax[<span class="number">4</span>])</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/images/bikesd_220711/output_49_0.png" alt="png"></p>
<h3 id="3-시각화의-결론"><a href="#3-시각화의-결론" class="headerlink" title="3.시각화의 결론"></a>3.시각화의 결론</h3><ul>
<li>causal과 registered의 합계가 target값(count)이므로 비례관계가 성립하기에 제거한다. </li>
<li>수치형 변수</li>
</ul>
<ul>
<li>온도(temp,atemp)는 정비례 관계가 습도(humidity)는 반비례 관계가 나타나며 풍향(windspeed)는 정비례관계가 너무 작기에 제거(또는 0의 값 보완)한다.</li>
</ul>
<ul>
<li>범주형 변수</li>
</ul>
<ul>
<li>시간 변수는 다른 변수들과의 대여량 간 관계를 설명해주는 강력한 변수이다</li>
<li>날씨(weather)는 값이 4인 것은 이상치 이므로 제거한다.</li>
<li>계절(season)은 달(month)와 같은 변수에서 나왔기에 단순한 계절(season)만 남긴다.</li>
</ul>
<ul>
<li>타깃(target)</li>
</ul>
<ul>
<li>count</li>
</ul>
<h2 id="STEP5-데이터-전처리"><a href="#STEP5-데이터-전처리" class="headerlink" title="STEP5. 데이터 전처리"></a>STEP5. 데이터 전처리</h2><ul>
<li>datetime으로부터 필요한 열 생성 : hour, dayofweek(month나 day는 의미없다)</li>
<li>causal과 registered 컬럼 제거</li>
<li>weather의 4인 값 제거</li>
<li>windspeed의 변수 보완</li>
<li>count의 아웃라이어 제거(3시그마를 초과하는 값을 이상치로 간주하고 제거)</li>
<li>atemp제거(temp와 별차이가 없다)</li>
<li>target인 count의 열 로그변환</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># datetime으로부터 필요한 열 생성 : hour, dayofweek(month나 day는 의미없다)</span></span><br><span class="line">train[<span class="string">&#x27;date&#x27;</span>] = pd.to_datetime(train[<span class="string">&#x27;datetime&#x27;</span>])</span><br><span class="line">train[<span class="string">&#x27;year&#x27;</span>] = train[<span class="string">&#x27;date&#x27;</span>].dt.year</span><br><span class="line">train[<span class="string">&#x27;hour&#x27;</span>] = train[<span class="string">&#x27;date&#x27;</span>].dt.hour</span><br><span class="line">train[<span class="string">&#x27;dayofweek&#x27;</span>] = train[<span class="string">&#x27;date&#x27;</span>].dt.dayofweek</span><br><span class="line"><span class="comment"># 불필요한 열 삭제</span></span><br><span class="line"><span class="keyword">del</span> train [<span class="string">&#x27;datetime&#x27;</span>]</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">del</span> train [<span class="string">&#x27;date&#x27;</span>]</span><br><span class="line">display(train.head())</span><br></pre></td></tr></table></figure>



  <div id="df-1bbf8d85-9f45-45d1-9c2c-f20d16cf8b0a">
    <div class="colab-df-container">
      <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>season</th>
      <th>holiday</th>
      <th>workingday</th>
      <th>weather</th>
      <th>temp</th>
      <th>atemp</th>
      <th>humidity</th>
      <th>windspeed</th>
      <th>casual</th>
      <th>registered</th>
      <th>count</th>
      <th>year</th>
      <th>hour</th>
      <th>dayofweek</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>9.84</td>
      <td>14.395</td>
      <td>81</td>
      <td>0.0</td>
      <td>3</td>
      <td>13</td>
      <td>16</td>
      <td>2011</td>
      <td>0</td>
      <td>5</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>9.02</td>
      <td>13.635</td>
      <td>80</td>
      <td>0.0</td>
      <td>8</td>
      <td>32</td>
      <td>40</td>
      <td>2011</td>
      <td>1</td>
      <td>5</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>9.02</td>
      <td>13.635</td>
      <td>80</td>
      <td>0.0</td>
      <td>5</td>
      <td>27</td>
      <td>32</td>
      <td>2011</td>
      <td>2</td>
      <td>5</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>9.84</td>
      <td>14.395</td>
      <td>75</td>
      <td>0.0</td>
      <td>3</td>
      <td>10</td>
      <td>13</td>
      <td>2011</td>
      <td>3</td>
      <td>5</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>9.84</td>
      <td>14.395</td>
      <td>75</td>
      <td>0.0</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>2011</td>
      <td>4</td>
      <td>5</td>
    </tr>
  </tbody>
</table>
</div>
      <button class="colab-df-convert" onclick="convertToInteractive('df-1bbf8d85-9f45-45d1-9c2c-f20d16cf8b0a')"
              title="Convert this dataframe to an interactive table."
              style="display:none;">

<p>  &lt;svg xmlns&#x3D;”<a target="_blank" rel="noopener" href="http://www.w3.org/2000/svg&quot;">http://www.w3.org/2000/svg&quot;</a> height&#x3D;”24px”viewBox&#x3D;”0 0 24 24”<br>       width&#x3D;”24px”&gt;<br>    <path d="M0 0h24v24H0V0z" fill="none"/><br>    <path d="M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z"/><path d="M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z"/><br>  </svg><br>      </button></p>
  <style>
    .colab-df-container {
      display:flex;
      flex-wrap:wrap;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

<pre><code>  &lt;script&gt;
    const buttonEl =
      document.querySelector(&#39;#df-1bbf8d85-9f45-45d1-9c2c-f20d16cf8b0a button.colab-df-convert&#39;);
    buttonEl.style.display =
      google.colab.kernel.accessAllowed ? &#39;block&#39; : &#39;none&#39;;

    async function convertToInteractive(key) &#123;
      const element = document.querySelector(&#39;#df-1bbf8d85-9f45-45d1-9c2c-f20d16cf8b0a&#39;);
      const dataTable =
        await google.colab.kernel.invokeFunction(&#39;convertToInteractive&#39;,
                                                 [key], &#123;&#125;);
      if (!dataTable) return;

      const docLinkHtml = &#39;Like what you see? Visit the &#39; +
        &#39;&lt;a target=&quot;_blank&quot; href=https://colab.research.google.com/notebooks/data_table.ipynb&gt;data table notebook&lt;/a&gt;&#39;
        + &#39; to learn more about interactive tables.&#39;;
      element.innerHTML = &#39;&#39;;
      dataTable[&#39;output_type&#39;] = &#39;display_data&#39;;
      await google.colab.output.renderOutput(dataTable, element);
      const docLink = document.createElement(&#39;div&#39;);
      docLink.innerHTML = docLinkHtml;
      element.appendChild(docLink);
    &#125;
  &lt;/script&gt;
&lt;/div&gt;
</code></pre>
  </div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># causal과 registered 컬럼 제거</span></span><br><span class="line">train = train.drop([<span class="string">&#x27;casual&#x27;</span>,<span class="string">&#x27;registered&#x27;</span>],axis = <span class="number">1</span>)</span><br><span class="line">train.shape, test.shape</span><br></pre></td></tr></table></figure>




<pre><code>((10886, 12), (6493, 9))
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1 weather 4값 제거</span></span><br><span class="line">train = train[train[<span class="string">&#x27;weather&#x27;</span>]!=<span class="number">4</span>].reset_index(drop = <span class="literal">True</span>)</span><br><span class="line">train.shape, test.shape<span class="comment"># test값을 건딜면 제출이 안되니 그냥 보존</span></span><br></pre></td></tr></table></figure>




<pre><code>((10885, 12), (6493, 9))
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># count의 아웃라이어 제거(3시그마를 초과하는 값을 이상치로 간주하고 제거)</span></span><br><span class="line">train = train[train[<span class="string">&#x27;count&#x27;</span>] - train[<span class="string">&#x27;count&#x27;</span>].mean()&lt; <span class="number">3</span>*train[<span class="string">&#x27;count&#x27;</span>].std()]</span><br><span class="line">train.reset_index(inplace = <span class="literal">True</span>, drop = <span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>(train.shape)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<pre><code>(10738, 12)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># target인 count열의 로그변환</span></span><br><span class="line">train[<span class="string">&#x27;count&#x27;</span>] = np.log1p(train[<span class="string">&#x27;count&#x27;</span>])</span><br><span class="line">display(train.head())</span><br></pre></td></tr></table></figure>



  <div id="df-444f55fc-3233-4b24-a1ec-30d643fd547c">
    <div class="colab-df-container">
      <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>season</th>
      <th>holiday</th>
      <th>workingday</th>
      <th>weather</th>
      <th>temp</th>
      <th>atemp</th>
      <th>humidity</th>
      <th>windspeed</th>
      <th>count</th>
      <th>year</th>
      <th>hour</th>
      <th>dayofweek</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>9.84</td>
      <td>14.395</td>
      <td>81</td>
      <td>0.0</td>
      <td>2.833213</td>
      <td>2011</td>
      <td>0</td>
      <td>5</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>9.02</td>
      <td>13.635</td>
      <td>80</td>
      <td>0.0</td>
      <td>3.713572</td>
      <td>2011</td>
      <td>1</td>
      <td>5</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>9.02</td>
      <td>13.635</td>
      <td>80</td>
      <td>0.0</td>
      <td>3.496508</td>
      <td>2011</td>
      <td>2</td>
      <td>5</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>9.84</td>
      <td>14.395</td>
      <td>75</td>
      <td>0.0</td>
      <td>2.639057</td>
      <td>2011</td>
      <td>3</td>
      <td>5</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>9.84</td>
      <td>14.395</td>
      <td>75</td>
      <td>0.0</td>
      <td>0.693147</td>
      <td>2011</td>
      <td>4</td>
      <td>5</td>
    </tr>
  </tbody>
</table>
</div>
      <button class="colab-df-convert" onclick="convertToInteractive('df-444f55fc-3233-4b24-a1ec-30d643fd547c')"
              title="Convert this dataframe to an interactive table."
              style="display:none;">

<p>  &lt;svg xmlns&#x3D;”<a target="_blank" rel="noopener" href="http://www.w3.org/2000/svg&quot;">http://www.w3.org/2000/svg&quot;</a> height&#x3D;”24px”viewBox&#x3D;”0 0 24 24”<br>       width&#x3D;”24px”&gt;<br>    <path d="M0 0h24v24H0V0z" fill="none"/><br>    <path d="M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z"/><path d="M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z"/><br>  </svg><br>      </button></p>
  <style>
    .colab-df-container {
      display:flex;
      flex-wrap:wrap;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

<pre><code>  &lt;script&gt;
    const buttonEl =
      document.querySelector(&#39;#df-444f55fc-3233-4b24-a1ec-30d643fd547c button.colab-df-convert&#39;);
    buttonEl.style.display =
      google.colab.kernel.accessAllowed ? &#39;block&#39; : &#39;none&#39;;

    async function convertToInteractive(key) &#123;
      const element = document.querySelector(&#39;#df-444f55fc-3233-4b24-a1ec-30d643fd547c&#39;);
      const dataTable =
        await google.colab.kernel.invokeFunction(&#39;convertToInteractive&#39;,
                                                 [key], &#123;&#125;);
      if (!dataTable) return;

      const docLinkHtml = &#39;Like what you see? Visit the &#39; +
        &#39;&lt;a target=&quot;_blank&quot; href=https://colab.research.google.com/notebooks/data_table.ipynb&gt;data table notebook&lt;/a&gt;&#39;
        + &#39; to learn more about interactive tables.&#39;;
      element.innerHTML = &#39;&#39;;
      dataTable[&#39;output_type&#39;] = &#39;display_data&#39;;
      await google.colab.output.renderOutput(dataTable, element);
      const docLink = document.createElement(&#39;div&#39;);
      docLink.innerHTML = docLinkHtml;
      element.appendChild(docLink);
    &#125;
  &lt;/script&gt;
&lt;/div&gt;
</code></pre>
  </div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 왜도확인 -&gt; +-2범위에 들어가므로 치우침이 없다.</span></span><br><span class="line"><span class="built_in">print</span>(train[<span class="string">&#x27;count&#x27;</span>].skew())</span><br></pre></td></tr></table></figure>

<pre><code>-0.8704448527723871
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 범주형 변수의 타입변환</span></span><br><span class="line">cate_name = [<span class="string">&#x27;weather&#x27;</span>,<span class="string">&#x27;season&#x27;</span>,<span class="string">&#x27;year&#x27;</span>,<span class="string">&#x27;hour&#x27;</span>,<span class="string">&#x27;dayofweek&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> c <span class="keyword">in</span> cate_name:</span><br><span class="line">    train[c] = train[c].astype(<span class="string">&#x27;category&#x27;</span>)</span><br><span class="line">train.dtypes</span><br></pre></td></tr></table></figure>




<pre><code>season        category
holiday          int64
workingday       int64
weather       category
temp           float64
atemp          float64
humidity         int64
windspeed      float64
count          float64
year          category
hour          category
dayofweek     category
dtype: object
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(train.info())</span><br></pre></td></tr></table></figure>

<pre><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 10738 entries, 0 to 10737
Data columns (total 12 columns):
 #   Column      Non-Null Count  Dtype   
---  ------      --------------  -----   
 0   season      10738 non-null  category
 1   holiday     10738 non-null  int64   
 2   workingday  10738 non-null  int64   
 3   weather     10738 non-null  category
 4   temp        10738 non-null  float64 
 5   atemp       10738 non-null  float64 
 6   humidity    10738 non-null  int64   
 7   windspeed   10738 non-null  float64 
 8   count       10738 non-null  float64 
 9   year        10738 non-null  category
 10  hour        10738 non-null  category
 11  dayofweek   10738 non-null  category
dtypes: category(5), float64(4), int64(3)
memory usage: 641.3 KB
None
</code></pre>
<ul>
<li>test 데이터도 train 데이터와 동일한 작업을 해준다</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># datetime으로부터 필요한 열 생성 : hour, dayofweek(month나 day는 의미없다)</span></span><br><span class="line">test[<span class="string">&#x27;date&#x27;</span>] = pd.to_datetime(test[<span class="string">&#x27;datetime&#x27;</span>])</span><br><span class="line">test[<span class="string">&#x27;year&#x27;</span>] = test[<span class="string">&#x27;date&#x27;</span>].dt.year</span><br><span class="line">test[<span class="string">&#x27;hour&#x27;</span>] = test[<span class="string">&#x27;date&#x27;</span>].dt.hour</span><br><span class="line">test[<span class="string">&#x27;dayofweek&#x27;</span>] = test[<span class="string">&#x27;date&#x27;</span>].dt.dayofweek</span><br><span class="line"><span class="comment">#불필요한 열 삭제</span></span><br><span class="line"><span class="keyword">del</span> test [<span class="string">&#x27;datetime&#x27;</span>]</span><br><span class="line"><span class="keyword">del</span> test [<span class="string">&#x27;date&#x27;</span>]</span><br><span class="line">display(test.head())</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



  <div id="df-7f495a76-ee75-4609-b1cb-6f33686b3e83">
    <div class="colab-df-container">
      <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>season</th>
      <th>holiday</th>
      <th>workingday</th>
      <th>weather</th>
      <th>temp</th>
      <th>atemp</th>
      <th>humidity</th>
      <th>windspeed</th>
      <th>year</th>
      <th>hour</th>
      <th>dayofweek</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>10.66</td>
      <td>11.365</td>
      <td>56</td>
      <td>26.0027</td>
      <td>2011</td>
      <td>0</td>
      <td>3</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>10.66</td>
      <td>13.635</td>
      <td>56</td>
      <td>0.0000</td>
      <td>2011</td>
      <td>1</td>
      <td>3</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>10.66</td>
      <td>13.635</td>
      <td>56</td>
      <td>0.0000</td>
      <td>2011</td>
      <td>2</td>
      <td>3</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>10.66</td>
      <td>12.880</td>
      <td>56</td>
      <td>11.0014</td>
      <td>2011</td>
      <td>3</td>
      <td>3</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>10.66</td>
      <td>12.880</td>
      <td>56</td>
      <td>11.0014</td>
      <td>2011</td>
      <td>4</td>
      <td>3</td>
    </tr>
  </tbody>
</table>
</div>
      <button class="colab-df-convert" onclick="convertToInteractive('df-7f495a76-ee75-4609-b1cb-6f33686b3e83')"
              title="Convert this dataframe to an interactive table."
              style="display:none;">

<p>  &lt;svg xmlns&#x3D;”<a target="_blank" rel="noopener" href="http://www.w3.org/2000/svg&quot;">http://www.w3.org/2000/svg&quot;</a> height&#x3D;”24px”viewBox&#x3D;”0 0 24 24”<br>       width&#x3D;”24px”&gt;<br>    <path d="M0 0h24v24H0V0z" fill="none"/><br>    <path d="M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z"/><path d="M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z"/><br>  </svg><br>      </button></p>
  <style>
    .colab-df-container {
      display:flex;
      flex-wrap:wrap;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

<pre><code>  &lt;script&gt;
    const buttonEl =
      document.querySelector(&#39;#df-7f495a76-ee75-4609-b1cb-6f33686b3e83 button.colab-df-convert&#39;);
    buttonEl.style.display =
      google.colab.kernel.accessAllowed ? &#39;block&#39; : &#39;none&#39;;

    async function convertToInteractive(key) &#123;
      const element = document.querySelector(&#39;#df-7f495a76-ee75-4609-b1cb-6f33686b3e83&#39;);
      const dataTable =
        await google.colab.kernel.invokeFunction(&#39;convertToInteractive&#39;,
                                                 [key], &#123;&#125;);
      if (!dataTable) return;

      const docLinkHtml = &#39;Like what you see? Visit the &#39; +
        &#39;&lt;a target=&quot;_blank&quot; href=https://colab.research.google.com/notebooks/data_table.ipynb&gt;data table notebook&lt;/a&gt;&#39;
        + &#39; to learn more about interactive tables.&#39;;
      element.innerHTML = &#39;&#39;;
      dataTable[&#39;output_type&#39;] = &#39;display_data&#39;;
      await google.colab.output.renderOutput(dataTable, element);
      const docLink = document.createElement(&#39;div&#39;);
      docLink.innerHTML = docLinkHtml;
      element.appendChild(docLink);
    &#125;
  &lt;/script&gt;
&lt;/div&gt;
</code></pre>
  </div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">test.info()</span><br></pre></td></tr></table></figure>

<pre><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 6493 entries, 0 to 6492
Data columns (total 11 columns):
 #   Column      Non-Null Count  Dtype  
---  ------      --------------  -----  
 0   season      6493 non-null   int64  
 1   holiday     6493 non-null   int64  
 2   workingday  6493 non-null   int64  
 3   weather     6493 non-null   int64  
 4   temp        6493 non-null   float64
 5   atemp       6493 non-null   float64
 6   humidity    6493 non-null   int64  
 7   windspeed   6493 non-null   float64
 8   year        6493 non-null   int64  
 9   hour        6493 non-null   int64  
 10  dayofweek   6493 non-null   int64  
dtypes: float64(3), int64(8)
memory usage: 558.1 KB
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1 weather 4값 제거</span></span><br><span class="line"><span class="comment">#test = test[test[&#x27;weather&#x27;]!=4].reset_index(drop = True)</span></span><br><span class="line"><span class="comment">#test.shape# test값을 건딜면 제출이 안되니 그냥 보존</span></span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 범주형 변수의 타입변환</span></span><br><span class="line">cate_name1 = [<span class="string">&#x27;weather&#x27;</span>,<span class="string">&#x27;season&#x27;</span>,<span class="string">&#x27;year&#x27;</span>,<span class="string">&#x27;hour&#x27;</span>,<span class="string">&#x27;dayofweek&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> c <span class="keyword">in</span> cate_name1:</span><br><span class="line">    test[c] = test[c].astype(<span class="string">&#x27;category&#x27;</span>)</span><br><span class="line">test.dtypes</span><br></pre></td></tr></table></figure>




<pre><code>season        category
holiday          int64
workingday       int64
weather       category
temp           float64
atemp          float64
humidity         int64
windspeed      float64
year          category
hour          category
dayofweek     category
dtype: object
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(test.info())</span><br></pre></td></tr></table></figure>

<pre><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 6493 entries, 0 to 6492
Data columns (total 11 columns):
 #   Column      Non-Null Count  Dtype   
---  ------      --------------  -----   
 0   season      6493 non-null   category
 1   holiday     6493 non-null   int64   
 2   workingday  6493 non-null   int64   
 3   weather     6493 non-null   category
 4   temp        6493 non-null   float64 
 5   atemp       6493 non-null   float64 
 6   humidity    6493 non-null   int64   
 7   windspeed   6493 non-null   float64 
 8   year        6493 non-null   category
 9   hour        6493 non-null   category
 10  dayofweek   6493 non-null   category
dtypes: category(5), float64(3), int64(3)
memory usage: 337.8 KB
None
</code></pre>
<h2 id="STEP-6-모델링"><a href="#STEP-6-모델링" class="headerlink" title="STEP 6.모델링"></a>STEP 6.모델링</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split, GridSearchCV</span><br><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LinearRegression, Ridge</span><br><span class="line"><span class="keyword">from</span> xgboost <span class="keyword">import</span> XGBRegressor</span><br><span class="line"><span class="keyword">from</span> sklearn.ensemble <span class="keyword">import</span> RandomForestRegressor</span><br><span class="line"><span class="keyword">from</span> lightgbm <span class="keyword">import</span> LGBMRegressor</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> mean_squared_error</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> cross_validate</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> GridSearchCV</span><br><span class="line"><span class="keyword">from</span> sklearn.pipeline <span class="keyword">import</span> Pipeline, make_pipeline</span><br></pre></td></tr></table></figure>

<h3 id="예측모델"><a href="#예측모델" class="headerlink" title="예측모델"></a>예측모델</h3><ul>
<li>변수와 타겟값을 나눠 X,y 데이터를 만든다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">X = train.drop([<span class="string">&#x27;count&#x27;</span>],axis = <span class="number">1</span>)</span><br><span class="line">y = train[<span class="string">&#x27;count&#x27;</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li>수치형 변수인 temp,atemp,humidity,windspeed에 스케일링을 한다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> StandardScaler</span><br><span class="line">ss=StandardScaler()</span><br><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> MinMaxScaler</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 선형회귀모델</span></span><br><span class="line">lr_reg = LinearRegression()</span><br><span class="line"><span class="comment"># 피처에 대한 표준화 진행과 K-fold를 함께 진행</span></span><br><span class="line">pipe = make_pipeline(MinMaxScaler(),lr_reg)</span><br><span class="line">scores = cross_validate(pipe,X,y,cv=<span class="number">5</span>,</span><br><span class="line">                        scoring=<span class="string">&#x27;neg_mean_squared_error&#x27;</span>,return_train_score =<span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;MSLE: &#123;0:.3f&#125;&quot;</span>.<span class="built_in">format</span>(np.mean(-scores[<span class="string">&#x27;test_score&#x27;</span>])))</span><br></pre></td></tr></table></figure>

<pre><code>MSLE: 1.056
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#rf</span></span><br><span class="line">np.random.seed(<span class="number">0</span>)</span><br><span class="line">rf = RandomForestRegressor(n_estimators = <span class="number">300</span>)</span><br><span class="line"><span class="comment"># 피처에 대한 표준화 진행과 K-fold를 함께 진행</span></span><br><span class="line">pipe = make_pipeline(MinMaxScaler(),rf)</span><br><span class="line">scores = cross_validate(pipe,X,y,cv=<span class="number">5</span>,</span><br><span class="line">                        scoring=<span class="string">&#x27;neg_mean_squared_error&#x27;</span>,return_train_score =<span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;MSLE: &#123;0:.3f&#125;&quot;</span>.<span class="built_in">format</span>(np.mean(-scores[<span class="string">&#x27;test_score&#x27;</span>])))</span><br></pre></td></tr></table></figure>

<pre><code>MSLE: 0.225
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#LGBM</span></span><br><span class="line">lgbm = LGBMRegressor(n_estimators = <span class="number">500</span>, objective = <span class="string">&#x27;regression&#x27;</span>)</span><br><span class="line"><span class="comment"># 피처에 대한 표준화 진행과 K-fold를 함께 진행</span></span><br><span class="line">pipe = make_pipeline(MinMaxScaler(),lgbm)</span><br><span class="line">scores = cross_validate(pipe,X,y,cv=<span class="number">5</span>,</span><br><span class="line">                        scoring=<span class="string">&#x27;neg_mean_squared_error&#x27;</span>,return_train_score =<span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;MSLE: &#123;0:.3f&#125;&quot;</span>.<span class="built_in">format</span>(np.mean(-scores[<span class="string">&#x27;test_score&#x27;</span>])))</span><br></pre></td></tr></table></figure>

<pre><code>MSLE: 0.183
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 피쳐 표준화</span></span><br><span class="line">minmax = MinMaxScaler()</span><br><span class="line">minmax.fit(X) <span class="comment"># 훈련셋 모수 분포 저장</span></span><br><span class="line">X_scaled = minmax.transform(X)</span><br><span class="line">X_test_scaled = minmax.transform(test)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 최종파라미터 튜닝된 모델로 학습</span></span><br><span class="line">lgbm = LGBMRegressor(n_estimators = <span class="number">300</span>, objective = <span class="string">&#x27;regression&#x27;</span>,</span><br><span class="line">                     learning_rate = <span class="number">0.1</span>, max_depth = <span class="number">3</span>, reg_lambda =<span class="number">1</span> ,subsample = <span class="number">0.5</span>, </span><br><span class="line">                     random_state = <span class="number">99</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 학습</span></span><br><span class="line">lgbm.fit(X_scaled, y)</span><br></pre></td></tr></table></figure>




<pre><code>LGBMRegressor(max_depth=3, n_estimators=300, objective=&#39;regression&#39;,
              random_state=99, reg_lambda=1, subsample=0.5)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># test에 대한 예측</span></span><br><span class="line">pred = lgbm.predict(X_test_scaled)</span><br><span class="line">fpred = np.expm1(pred)<span class="comment"># 로그변환을 풀어줌</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#lgbm 모델의 feature importance</span></span><br><span class="line">imp = pd.DataFrame(&#123;<span class="string">&#x27;feature&#x27;</span>: test.columns,</span><br><span class="line">                   <span class="string">&#x27;coefficient&#x27;</span>:lgbm.feature_importances_&#125;)</span><br><span class="line">imp = imp.sort_values(by = <span class="string">&#x27;coefficient&#x27;</span>, ascending = <span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">plt.barh(imp[<span class="string">&#x27;feature&#x27;</span>],imp[<span class="string">&#x27;coefficient&#x27;</span>])</span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p><img src="/images/bikesd_220711/output_77_0.png" alt="png"></p>
<ul>
<li>피처의 중요도를 뽑아봤을때 역시 hour가 가장 높은 기여도로 나왔다.</li>
</ul>
<h2 id="STEP7-제출"><a href="#STEP7-제출" class="headerlink" title="STEP7. 제출"></a>STEP7. 제출</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">del</span> submission[<span class="string">&#x27;count&#x27;</span>]</span><br><span class="line">submission[<span class="string">&#x27;count&#x27;</span>] =fpred</span><br><span class="line"></span><br><span class="line"><span class="comment">#submission.to_csv(&#x27;submission.csv&#x27;,index=False)</span></span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">submission.head()</span><br></pre></td></tr></table></figure>





  <div id="df-7fa8931c-8dc7-4b8d-aea5-9bf16a3575e2">
    <div class="colab-df-container">
      <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>datetime</th>
      <th>count</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2011-01-20 00:00:00</td>
      <td>8.674224</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2011-01-20 01:00:00</td>
      <td>4.650374</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2011-01-20 02:00:00</td>
      <td>2.842267</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2011-01-20 03:00:00</td>
      <td>1.616020</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2011-01-20 04:00:00</td>
      <td>1.506303</td>
    </tr>
  </tbody>
</table>
</div>
      <button class="colab-df-convert" onclick="convertToInteractive('df-7fa8931c-8dc7-4b8d-aea5-9bf16a3575e2')"
              title="Convert this dataframe to an interactive table."
              style="display:none;">

<p>  &lt;svg xmlns&#x3D;”<a target="_blank" rel="noopener" href="http://www.w3.org/2000/svg&quot;">http://www.w3.org/2000/svg&quot;</a> height&#x3D;”24px”viewBox&#x3D;”0 0 24 24”<br>       width&#x3D;”24px”&gt;<br>    <path d="M0 0h24v24H0V0z" fill="none"/><br>    <path d="M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z"/><path d="M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z"/><br>  </svg><br>      </button></p>
  <style>
    .colab-df-container {
      display:flex;
      flex-wrap:wrap;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

<pre><code>  &lt;script&gt;
    const buttonEl =
      document.querySelector(&#39;#df-7fa8931c-8dc7-4b8d-aea5-9bf16a3575e2 button.colab-df-convert&#39;);
    buttonEl.style.display =
      google.colab.kernel.accessAllowed ? &#39;block&#39; : &#39;none&#39;;

    async function convertToInteractive(key) &#123;
      const element = document.querySelector(&#39;#df-7fa8931c-8dc7-4b8d-aea5-9bf16a3575e2&#39;);
      const dataTable =
        await google.colab.kernel.invokeFunction(&#39;convertToInteractive&#39;,
                                                 [key], &#123;&#125;);
      if (!dataTable) return;

      const docLinkHtml = &#39;Like what you see? Visit the &#39; +
        &#39;&lt;a target=&quot;_blank&quot; href=https://colab.research.google.com/notebooks/data_table.ipynb&gt;data table notebook&lt;/a&gt;&#39;
        + &#39; to learn more about interactive tables.&#39;;
      element.innerHTML = &#39;&#39;;
      dataTable[&#39;output_type&#39;] = &#39;display_data&#39;;
      await google.colab.output.renderOutput(dataTable, element);
      const docLink = document.createElement(&#39;div&#39;);
      docLink.innerHTML = docLinkHtml;
      element.appendChild(docLink);
    &#125;
  &lt;/script&gt;
&lt;/div&gt;
</code></pre>
  </div>



</div><div class="article-licensing box"><div class="licensing-title"><p><a href="https://westar99.github.io/2022/07/12/bikesd_220711/">https://westar99.github.io/2022/07/12/bikesd_220711/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>John Doe</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2022-07-12</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2022-07-12</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="notification is-danger">You need to set <code>install_url</code> to use ShareThis. Please set it in <code>_config.yml</code>.</div></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">Like this article? Support the author with</h3><div class="buttons is-centered"><a class="button donate" href="/" target="_blank" rel="noopener" data-type="afdian"><span class="icon is-small"><i class="fas fa-charging-station"></i></span><span>Afdian.net</span></a><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>Alipay</span><span class="qrcode"><img src="/" alt="Alipay"></span></a><a class="button donate" href="/" target="_blank" rel="noopener" data-type="buymeacoffee"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>Buy me a coffee</span></a><a class="button donate" href="/" target="_blank" rel="noopener" data-type="patreon"><span class="icon is-small"><i class="fab fa-patreon"></i></span><span>Patreon</span></a><div class="notification is-danger">You forgot to set the <code>business</code> or <code>currency_code</code> for Paypal. Please set it in <code>_config.yml</code>.</div><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>Wechat</span><span class="qrcode"><img src="/" alt="Wechat"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2022/07/14/house-0713/"><i class="level-item fas fa-chevron-left"></i><span class="level-item"> </span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2022/07/08/day0708/"><span class="level-item"> </span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><div class="notification is-danger">You forgot to set the <code>shortname</code> for Disqus. Please set it in <code>_config.yml</code>.</div></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.png" alt="CHAI JE HYUNG"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">CHAI JE HYUNG</p><p class="is-size-6 is-block">GOD IS GOOD ALL THE TIME</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>SEOUL.KOREA</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">24</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">0</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/westar99" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/westar99"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://www.facebook.com/jehyung.chai"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile" href="https://bulma.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bulma</span></span><span class="level-right"><span class="level-item tag">bulma.io</span></span></a></li></ul></div></div></div><!--!--><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-07-14T01:42:44.000Z">2022-07-14</time></p><p class="title"><a href="/2022/07/14/house-0713/"> </a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-07-12T07:06:22.000Z">2022-07-12</time></p><p class="title"><a href="/2022/07/12/bikesd_220711/"> </a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-07-08T08:22:44.000Z">2022-07-08</time></p><p class="title"><a href="/2022/07/08/day0708/"> </a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-07-07T08:05:34.000Z">2022-07-07</time></p><p class="title"><a href="/2022/07/07/lecture_in_humanedu/"> </a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-07-06T07:38:20.000Z">2022-07-06</time></p><p class="title"><a href="/2022/07/06/day0706/"> </a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2022/07/"><span class="level-start"><span class="level-item">July 2022</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/06/"><span class="level-start"><span class="level-item">June 2022</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li></ul></div></div></div><!--!--><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe for updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget"><div class="card-content"><div class="notification is-danger">You need to set <code>client_id</code> and <code>slot_id</code> to show this AD unit. Please set it in <code>_config.yml</code>.</div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="CHAI JEHYUNG" height="28"></a><p class="is-size-7"><span>&copy; 2022 John Doe</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>