<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>CHAI JEHYUNG</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="CHAI JEHYUNG"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="CHAI JEHYUNG"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="1234567891011121314151617# This Python 3 environment comes with many helpful analytics libraries installed# It is defined by the kaggle&amp;#x2F;python Docker image: https:&amp;#x2F;&amp;#x2F;github.com&amp;#x2F;kaggle&amp;#x2F;docker-python# F"><meta property="og:type" content="blog"><meta property="og:title" content="CHAI JEHYUNG"><meta property="og:url" content="https://westar99.github.io/2022/07/14/house-0713/"><meta property="og:site_name" content="CHAI JEHYUNG"><meta property="og:description" content="1234567891011121314151617# This Python 3 environment comes with many helpful analytics libraries installed# It is defined by the kaggle&amp;#x2F;python Docker image: https:&amp;#x2F;&amp;#x2F;github.com&amp;#x2F;kaggle&amp;#x2F;docker-python# F"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://westar99.github.io/images/house-0713/image.png"><meta property="og:image" content="https://westar99.github.io/images/house-0713/output_17_1.png"><meta property="og:image" content="https://westar99.github.io/images/house-0713/output_19_1.png"><meta property="og:image" content="https://westar99.github.io/images/house-0713/output_21_1.png"><meta property="og:image" content="https://westar99.github.io/images/house-0713/output_21_2.png"><meta property="og:image" content="https://westar99.github.io/images/house-0713/output_23_0.png"><meta property="og:image" content="https://westar99.github.io/images/house-0713/output_24_1.png"><meta property="og:image" content="https://westar99.github.io/images/house-0713/output_28_1.png"><meta property="og:image" content="https://westar99.github.io/images/house-0713/output_30_1.png"><meta property="og:image" content="https://westar99.github.io/images/house-0713/output_49_0.png"><meta property="article:published_time" content="2022-07-14T01:42:44.000Z"><meta property="article:modified_time" content="2022-07-14T01:50:53.698Z"><meta property="article:author" content="John Doe"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/images/house-0713/image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://westar99.github.io/2022/07/14/house-0713/"},"headline":"CHAI JEHYUNG","image":["https://westar99.github.io/images/house-0713/image.png","https://westar99.github.io/images/house-0713/output_17_1.png","https://westar99.github.io/images/house-0713/output_19_1.png","https://westar99.github.io/images/house-0713/output_21_1.png","https://westar99.github.io/images/house-0713/output_21_2.png","https://westar99.github.io/images/house-0713/output_23_0.png","https://westar99.github.io/images/house-0713/output_24_1.png","https://westar99.github.io/images/house-0713/output_28_1.png","https://westar99.github.io/images/house-0713/output_30_1.png","https://westar99.github.io/images/house-0713/output_49_0.png"],"datePublished":"2022-07-14T01:42:44.000Z","dateModified":"2022-07-14T01:50:53.698Z","author":{"@type":"Person","name":"John Doe"},"publisher":{"@type":"Organization","name":"CHAI JEHYUNG","logo":{"@type":"ImageObject","url":"https://westar99.github.io/img/logo.svg"}},"description":"1234567891011121314151617# This Python 3 environment comes with many helpful analytics libraries installed# It is defined by the kaggle&#x2F;python Docker image: https:&#x2F;&#x2F;github.com&#x2F;kaggle&#x2F;docker-python# F"}</script><link rel="canonical" href="https://westar99.github.io/2022/07/14/house-0713/"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 6.2.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="CHAI JEHYUNG" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2022-07-14T01:42:44.000Z" title="2022. 7. 14. 오전 10:42:44">2022-07-14</time></span><span class="level-item">Updated&nbsp;<time dateTime="2022-07-14T01:50:53.698Z" title="2022. 7. 14. 오전 10:50:53">2022-07-14</time></span><span class="level-item">28 minutes read (About 4268 words)</span></div></div><div class="content"><p><img src="/images/house-0713/image.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># This Python 3 environment comes with many helpful analytics libraries installed</span></span><br><span class="line"><span class="comment"># It is defined by the kaggle/python Docker image: https://github.com/kaggle/docker-python</span></span><br><span class="line"><span class="comment"># For example, here&#x27;s several helpful packages to load</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np <span class="comment"># linear algebra</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd <span class="comment"># data processing, CSV file I/O (e.g. pd.read_csv)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Input data files are available in the read-only &quot;../input/&quot; directory</span></span><br><span class="line"><span class="comment"># For example, running this (by clicking run or pressing Shift+Enter) will list all files under the input directory</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">for</span> dirname, _, filenames <span class="keyword">in</span> os.walk(<span class="string">&#x27;/kaggle/input&#x27;</span>):</span><br><span class="line">    <span class="keyword">for</span> filename <span class="keyword">in</span> filenames:</span><br><span class="line">        <span class="built_in">print</span>(os.path.join(dirname, filename))</span><br><span class="line"></span><br><span class="line"><span class="comment"># You can write up to 20GB to the current directory (/kaggle/working/) that gets preserved as output when you create a version using &quot;Save &amp; Run All&quot; </span></span><br><span class="line"><span class="comment"># You can also write temporary files to /kaggle/temp/, but they won&#x27;t be saved outside of the current session</span></span><br></pre></td></tr></table></figure>

<pre><code>/kaggle/input/house-prices-advanced-regression-techniques/sample_submission.csv
/kaggle/input/house-prices-advanced-regression-techniques/data_description.txt
/kaggle/input/house-prices-advanced-regression-techniques/train.csv
/kaggle/input/house-prices-advanced-regression-techniques/test.csv
</code></pre>
<h2 id="STEP1-필수라이브러리-불러오기"><a href="#STEP1-필수라이브러리-불러오기" class="headerlink" title="STEP1. 필수라이브러리 불러오기"></a>STEP1. 필수라이브러리 불러오기</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd </span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np </span><br><span class="line"><span class="keyword">import</span> matplotlib <span class="keyword">as</span> mpl </span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns </span><br><span class="line"><span class="keyword">import</span> sklearn</span><br><span class="line"><span class="keyword">import</span> xgboost <span class="keyword">as</span> xgb </span><br><span class="line"><span class="keyword">import</span> lightgbm <span class="keyword">as</span> lgb</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;pandas version :&quot;</span>, pd.__version__)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;numpy version :&quot;</span>, np.__version__)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;matplotlib version :&quot;</span>, mpl.__version__)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;seaborn version :&quot;</span>, sns.__version__)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;scikit-learn version :&quot;</span>, sklearn.__version__)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;xgboost version :&quot;</span>, xgb.__version__)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;lightgbm version :&quot;</span>, lgb.__version__)</span><br></pre></td></tr></table></figure>


<style type='text/css'>
.datatable table.frame { margin-bottom: 0; }
.datatable table.frame thead { border-bottom: none; }
.datatable table.frame tr.coltypes td {  color: #FFFFFF;  line-height: 6px;  padding: 0 0.5em;}
.datatable .bool    { background: #DDDD99; }
.datatable .object  { background: #565656; }
.datatable .int     { background: #5D9E5D; }
.datatable .float   { background: #4040CC; }
.datatable .str     { background: #CC4040; }
.datatable .time    { background: #40CC40; }
.datatable .row_index {  background: var(--jp-border-color3);  border-right: 1px solid var(--jp-border-color0);  color: var(--jp-ui-font-color3);  font-size: 9px;}
.datatable .frame tbody td { text-align: left; }
.datatable .frame tr.coltypes .row_index {  background: var(--jp-border-color0);}
.datatable th:nth-child(2) { padding-left: 12px; }
.datatable .hellipsis {  color: var(--jp-cell-editor-border-color);}
.datatable .vellipsis {  background: var(--jp-layout-color0);  color: var(--jp-cell-editor-border-color);}
.datatable .na {  color: var(--jp-cell-editor-border-color);  font-size: 80%;}
.datatable .sp {  opacity: 0.25;}
.datatable .footer { font-size: 9px; }
.datatable .frame_dimensions {  background: var(--jp-border-color3);  border-top: 1px solid var(--jp-border-color0);  color: var(--jp-ui-font-color3);  display: inline-block;  opacity: 0.6;  padding: 1px 10px 1px 5px;}
</style>



<pre><code>pandas version : 1.3.5
numpy version : 1.21.6
matplotlib version : 3.5.2
seaborn version : 0.11.2
scikit-learn version : 1.0.2
xgboost version : 1.6.1
lightgbm version : 3.3.2
</code></pre>
<h2 id="STEP2-데이터-불러오기"><a href="#STEP2-데이터-불러오기" class="headerlink" title="STEP2.데이터 불러오기"></a>STEP2.데이터 불러오기</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">DATA_PATH = <span class="string">&#x27;/kaggle/input/house-prices-advanced-regression-techniques/&#x27;</span></span><br><span class="line">train = pd.read_csv(DATA_PATH + <span class="string">&quot;train.csv&quot;</span>)</span><br><span class="line">test = pd.read_csv(DATA_PATH + <span class="string">&quot;test.csv&quot;</span>)</span><br><span class="line">submission = pd.read_csv(DATA_PATH + <span class="string">&#x27;sample_submission.csv&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;데이터 불러오기 완료!&quot;</span>)</span><br></pre></td></tr></table></figure>

<pre><code>데이터 불러오기 완료!
</code></pre>
<h2 id="STEP3-데이터-둘러보기"><a href="#STEP3-데이터-둘러보기" class="headerlink" title="STEP3.데이터 둘러보기"></a>STEP3.데이터 둘러보기</h2><ul>
<li>데이터 변수 파악</li>
<li>데이터 전처리</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(train.shape, test.shape, submission.shape)</span><br></pre></td></tr></table></figure>

<pre><code>(1460, 81) (1459, 80) (1459, 2)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(train.info())</span><br></pre></td></tr></table></figure>

<pre><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 1460 entries, 0 to 1459
Data columns (total 81 columns):
 #   Column         Non-Null Count  Dtype  
---  ------         --------------  -----  
 0   Id             1460 non-null   int64  
 1   MSSubClass     1460 non-null   int64  
 2   MSZoning       1460 non-null   object 
 3   LotFrontage    1201 non-null   float64
 4   LotArea        1460 non-null   int64  
 5   Street         1460 non-null   object 
 6   Alley          91 non-null     object 
 7   LotShape       1460 non-null   object 
 8   LandContour    1460 non-null   object 
 9   Utilities      1460 non-null   object 
 10  LotConfig      1460 non-null   object 
 11  LandSlope      1460 non-null   object 
 12  Neighborhood   1460 non-null   object 
 13  Condition1     1460 non-null   object 
 14  Condition2     1460 non-null   object 
 15  BldgType       1460 non-null   object 
 16  HouseStyle     1460 non-null   object 
 17  OverallQual    1460 non-null   int64  
 18  OverallCond    1460 non-null   int64  
 19  YearBuilt      1460 non-null   int64  
 20  YearRemodAdd   1460 non-null   int64  
 21  RoofStyle      1460 non-null   object 
 22  RoofMatl       1460 non-null   object 
 23  Exterior1st    1460 non-null   object 
 24  Exterior2nd    1460 non-null   object 
 25  MasVnrType     1452 non-null   object 
 26  MasVnrArea     1452 non-null   float64
 27  ExterQual      1460 non-null   object 
 28  ExterCond      1460 non-null   object 
 29  Foundation     1460 non-null   object 
 30  BsmtQual       1423 non-null   object 
 31  BsmtCond       1423 non-null   object 
 32  BsmtExposure   1422 non-null   object 
 33  BsmtFinType1   1423 non-null   object 
 34  BsmtFinSF1     1460 non-null   int64  
 35  BsmtFinType2   1422 non-null   object 
 36  BsmtFinSF2     1460 non-null   int64  
 37  BsmtUnfSF      1460 non-null   int64  
 38  TotalBsmtSF    1460 non-null   int64  
 39  Heating        1460 non-null   object 
 40  HeatingQC      1460 non-null   object 
 41  CentralAir     1460 non-null   object 
 42  Electrical     1459 non-null   object 
 43  1stFlrSF       1460 non-null   int64  
 44  2ndFlrSF       1460 non-null   int64  
 45  LowQualFinSF   1460 non-null   int64  
 46  GrLivArea      1460 non-null   int64  
 47  BsmtFullBath   1460 non-null   int64  
 48  BsmtHalfBath   1460 non-null   int64  
 49  FullBath       1460 non-null   int64  
 50  HalfBath       1460 non-null   int64  
 51  BedroomAbvGr   1460 non-null   int64  
 52  KitchenAbvGr   1460 non-null   int64  
 53  KitchenQual    1460 non-null   object 
 54  TotRmsAbvGrd   1460 non-null   int64  
 55  Functional     1460 non-null   object 
 56  Fireplaces     1460 non-null   int64  
 57  FireplaceQu    770 non-null    object 
 58  GarageType     1379 non-null   object 
 59  GarageYrBlt    1379 non-null   float64
 60  GarageFinish   1379 non-null   object 
 61  GarageCars     1460 non-null   int64  
 62  GarageArea     1460 non-null   int64  
 63  GarageQual     1379 non-null   object 
 64  GarageCond     1379 non-null   object 
 65  PavedDrive     1460 non-null   object 
 66  WoodDeckSF     1460 non-null   int64  
 67  OpenPorchSF    1460 non-null   int64  
 68  EnclosedPorch  1460 non-null   int64  
 69  3SsnPorch      1460 non-null   int64  
 70  ScreenPorch    1460 non-null   int64  
 71  PoolArea       1460 non-null   int64  
 72  PoolQC         7 non-null      object 
 73  Fence          281 non-null    object 
 74  MiscFeature    54 non-null     object 
 75  MiscVal        1460 non-null   int64  
 76  MoSold         1460 non-null   int64  
 77  YrSold         1460 non-null   int64  
 78  SaleType       1460 non-null   object 
 79  SaleCondition  1460 non-null   object 
 80  SalePrice      1460 non-null   int64  
dtypes: float64(3), int64(35), object(43)
memory usage: 924.0+ KB
None
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(test.info())</span><br></pre></td></tr></table></figure>

<pre><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 1459 entries, 0 to 1458
Data columns (total 80 columns):
 #   Column         Non-Null Count  Dtype  
---  ------         --------------  -----  
 0   Id             1459 non-null   int64  
 1   MSSubClass     1459 non-null   int64  
 2   MSZoning       1455 non-null   object 
 3   LotFrontage    1232 non-null   float64
 4   LotArea        1459 non-null   int64  
 5   Street         1459 non-null   object 
 6   Alley          107 non-null    object 
 7   LotShape       1459 non-null   object 
 8   LandContour    1459 non-null   object 
 9   Utilities      1457 non-null   object 
 10  LotConfig      1459 non-null   object 
 11  LandSlope      1459 non-null   object 
 12  Neighborhood   1459 non-null   object 
 13  Condition1     1459 non-null   object 
 14  Condition2     1459 non-null   object 
 15  BldgType       1459 non-null   object 
 16  HouseStyle     1459 non-null   object 
 17  OverallQual    1459 non-null   int64  
 18  OverallCond    1459 non-null   int64  
 19  YearBuilt      1459 non-null   int64  
 20  YearRemodAdd   1459 non-null   int64  
 21  RoofStyle      1459 non-null   object 
 22  RoofMatl       1459 non-null   object 
 23  Exterior1st    1458 non-null   object 
 24  Exterior2nd    1458 non-null   object 
 25  MasVnrType     1443 non-null   object 
 26  MasVnrArea     1444 non-null   float64
 27  ExterQual      1459 non-null   object 
 28  ExterCond      1459 non-null   object 
 29  Foundation     1459 non-null   object 
 30  BsmtQual       1415 non-null   object 
 31  BsmtCond       1414 non-null   object 
 32  BsmtExposure   1415 non-null   object 
 33  BsmtFinType1   1417 non-null   object 
 34  BsmtFinSF1     1458 non-null   float64
 35  BsmtFinType2   1417 non-null   object 
 36  BsmtFinSF2     1458 non-null   float64
 37  BsmtUnfSF      1458 non-null   float64
 38  TotalBsmtSF    1458 non-null   float64
 39  Heating        1459 non-null   object 
 40  HeatingQC      1459 non-null   object 
 41  CentralAir     1459 non-null   object 
 42  Electrical     1459 non-null   object 
 43  1stFlrSF       1459 non-null   int64  
 44  2ndFlrSF       1459 non-null   int64  
 45  LowQualFinSF   1459 non-null   int64  
 46  GrLivArea      1459 non-null   int64  
 47  BsmtFullBath   1457 non-null   float64
 48  BsmtHalfBath   1457 non-null   float64
 49  FullBath       1459 non-null   int64  
 50  HalfBath       1459 non-null   int64  
 51  BedroomAbvGr   1459 non-null   int64  
 52  KitchenAbvGr   1459 non-null   int64  
 53  KitchenQual    1458 non-null   object 
 54  TotRmsAbvGrd   1459 non-null   int64  
 55  Functional     1457 non-null   object 
 56  Fireplaces     1459 non-null   int64  
 57  FireplaceQu    729 non-null    object 
 58  GarageType     1383 non-null   object 
 59  GarageYrBlt    1381 non-null   float64
 60  GarageFinish   1381 non-null   object 
 61  GarageCars     1458 non-null   float64
 62  GarageArea     1458 non-null   float64
 63  GarageQual     1381 non-null   object 
 64  GarageCond     1381 non-null   object 
 65  PavedDrive     1459 non-null   object 
 66  WoodDeckSF     1459 non-null   int64  
 67  OpenPorchSF    1459 non-null   int64  
 68  EnclosedPorch  1459 non-null   int64  
 69  3SsnPorch      1459 non-null   int64  
 70  ScreenPorch    1459 non-null   int64  
 71  PoolArea       1459 non-null   int64  
 72  PoolQC         3 non-null      object 
 73  Fence          290 non-null    object 
 74  MiscFeature    51 non-null     object 
 75  MiscVal        1459 non-null   int64  
 76  MoSold         1459 non-null   int64  
 77  YrSold         1459 non-null   int64  
 78  SaleType       1458 non-null   object 
 79  SaleCondition  1459 non-null   object 
dtypes: float64(11), int64(26), object(43)
memory usage: 912.0+ KB
None
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(submission.info())</span><br></pre></td></tr></table></figure>

<pre><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 1459 entries, 0 to 1458
Data columns (total 2 columns):
 #   Column     Non-Null Count  Dtype  
---  ------     --------------  -----  
 0   Id         1459 non-null   int64  
 1   SalePrice  1459 non-null   float64
dtypes: float64(1), int64(1)
memory usage: 22.9 KB
None
</code></pre>
<h3 id="데이터-변수-칼럼-살펴보기"><a href="#데이터-변수-칼럼-살펴보기" class="headerlink" title="데이터 변수(칼럼) 살펴보기"></a>데이터 변수(칼럼) 살펴보기</h3><ol>
<li>SalePrice 집가격</li>
<li>OverallQual 집재료 및 마감평가</li>
<li>GrLivArea 지상 거실 면적</li>
<li>GarageArea 차고 크기</li>
<li>TotalBsmtSF 지하 총 면적</li>
<li>1stFlrSF 1층 면적</li>
<li>FullBath 전체 욕실</li>
<li>TotRmsAbvGrd 총 실수(욕실 미포함)</li>
<li>YearBuilt 건축년도</li>
<li>YearRemodAdd 리모델링년도</li>
<li>Fireplaces 벽난로 수</li>
<li>BsmtFinSF1 </li>
<li>LotFrontage</li>
<li>2ndFlrSF</li>
<li>HalfBath</li>
<li>LotArea</li>
<li>BsmtFullBath</li>
<li>BedroomAbvG</li>
<li>BsmtFinBath</li>
<li>BsmtHalfBath</li>
<li>LowQualfinSF</li>
<li>OverallCond</li>
<li>MSSubClass</li>
<li>KitchenAbvGr</li>
</ol>
<ul>
<li>-&gt;데이터 변수가 79개나 된다. 제거해도 될만한 컬럼을 제거해보자.</li>
</ul>
<h3 id="데이터-변수-칼럼-살펴보기-1"><a href="#데이터-변수-칼럼-살펴보기-1" class="headerlink" title="데이터 변수(칼럼) 살펴보기"></a>데이터 변수(칼럼) 살펴보기</h3><ol>
<li>SalePrice 집가격</li>
<li>OverallQual 집재료 및 마감평가</li>
<li>GrLivArea 지상 거실 면적</li>
<li>GarageArea 차고 크기</li>
<li>GarageCars 차고 대수</li>
<li>TotalBsmtSF 1층(기본층) 총 면적</li>
<li>1stFlrSF 2층 면적</li>
<li>FullBath 전체 욕실들(욕조,샤워,변기,세면대) </li>
<li>TotRmsAbvGrd 총 실수(욕실 미포함)</li>
<li>YearBuilt 건축년도</li>
<li>YearRemodAdd 리모델링 년도</li>
<li>GarageYrBlt 차고만든 년도</li>
<li>MasVnrArea 석조표면마무리 면적</li>
<li>Fireplaces 벽난로 수</li>
<li>BsmtFinSF1 지층 1차마감 면의 질 </li>
<li>LotFrontage 집과 연결된 길까지의 거리</li>
<li>2ndFlrSF 3층 면적</li>
<li>HalfBath 반쪽 욕실들(양변기,세면대)</li>
<li>OpenPorchSF 열린 현관 면적</li>
<li>LotArea 대지면적</li>
<li>BsmtFullBath 지층 풀 욕실</li>
<li>BedroomAbvG 지층포함 위쪽 침실</li>
<li>ScreenPorch 그물 현관 면적</li>
<li>PoolArea 수영장면적</li>
<li>MoSold 팔린 달</li>
<li>BsmtFinsF2 지층 2차마감 면의 질</li>
<li>BsmtHalfBath 지층의 반쪽 면적</li>
<li>LowQualfinSF 전층에서 낮은 마감의 면</li>
<li>OverallCond 전체적인 조건 평가</li>
<li>MSSubClass 건물특성별 점수</li>
<li>EnclosedPorch 막힌 현관 면적</li>
<li>KitchenAbvGr 부엌 수</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 상관분석</span></span><br><span class="line">train.corrwith(train[<span class="string">&#x27;SalePrice&#x27;</span>]).sort_values(ascending=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>




<pre><code>SalePrice        1.000000
OverallQual      0.790982
GrLivArea        0.708624
GarageCars       0.640409
GarageArea       0.623431
TotalBsmtSF      0.613581
1stFlrSF         0.605852
FullBath         0.560664
TotRmsAbvGrd     0.533723
YearBuilt        0.522897
YearRemodAdd     0.507101
GarageYrBlt      0.486362
MasVnrArea       0.477493
Fireplaces       0.466929
BsmtFinSF1       0.386420
LotFrontage      0.351799
WoodDeckSF       0.324413
2ndFlrSF         0.319334
OpenPorchSF      0.315856
HalfBath         0.284108
LotArea          0.263843
BsmtFullBath     0.227122
BsmtUnfSF        0.214479
BedroomAbvGr     0.168213
ScreenPorch      0.111447
PoolArea         0.092404
MoSold           0.046432
3SsnPorch        0.044584
BsmtFinSF2      -0.011378
BsmtHalfBath    -0.016844
MiscVal         -0.021190
Id              -0.021917
LowQualFinSF    -0.025606
YrSold          -0.028923
OverallCond     -0.077856
MSSubClass      -0.084284
EnclosedPorch   -0.128578
KitchenAbvGr    -0.135907
dtype: float64
</code></pre>
<ul>
<li>강한 상관치가 보이는 데이터는 OverallQual, GarageCars, GarageArea, TotalBsmtSF, 1stFlrSF, FullBath, TotRmsAbvGrd,  YearBuilt, YearRemodAdd를 우선적으로 선택한다.     </li>
<li>결측치가 보이는 데이터는 보완  생략을 한다.</li>
</ul>
<h2 id="STEP4-탐색적-자료분석"><a href="#STEP4-탐색적-자료분석" class="headerlink" title="STEP4. 탐색적 자료분석"></a>STEP4. 탐색적 자료분석</h2><ul>
<li>시각화<ul>
<li>타겟변수의 상태 확인</li>
<li>변수와 종속변수(SalePrice)의 시각화</li>
</ul>
</li>
</ul>
<h3 id="1-타겟변수-SalePricce-를-확인하여-시각화-해본다"><a href="#1-타겟변수-SalePricce-를-확인하여-시각화-해본다" class="headerlink" title="1.타겟변수(SalePricce)를 확인하여 시각화 해본다."></a>1.타겟변수(SalePricce)를 확인하여 시각화 해본다.</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt </span><br><span class="line"><span class="keyword">from</span> scipy.stats <span class="keyword">import</span> norm </span><br><span class="line">(mu, sigma) = norm.fit(train[<span class="string">&#x27;SalePrice&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;평균:&quot;</span>, mu)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;표준편차:&quot;</span>, sigma)</span><br><span class="line"></span><br><span class="line">fig, ax = plt.subplots(figsize=(<span class="number">10</span>, <span class="number">6</span>))</span><br><span class="line">sns.histplot(train[<span class="string">&#x27;SalePrice&#x27;</span>])</span><br><span class="line">ax.<span class="built_in">set</span>(title=<span class="string">&quot;SalePrice Distribution&quot;</span>)</span><br><span class="line">ax.axvline(mu, color = <span class="string">&#x27;r&#x27;</span>, linestyle = <span class="string">&#x27;--&#x27;</span>)</span><br><span class="line">ax.text(mu + <span class="number">10000</span>, <span class="number">160</span>, <span class="string">&#x27;Mean of SalePrice&#x27;</span>, color = <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<pre><code>평균: 180921.19589041095
표준편차: 79415.29188606751
</code></pre>
<p><img src="/images/house-0713/output_17_1.png" alt="png"></p>
<h3 id="2-변수와-종속변수-SalePrice-의-시각화"><a href="#2-변수와-종속변수-SalePrice-의-시각화" class="headerlink" title="2. 변수와 종속변수(SalePrice)의 시각화"></a>2. 변수와 종속변수(SalePrice)의 시각화</h3><ul>
<li>상관계수가 0.4이상의 히트맵 그래프를 그려본다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">corrmat = train.corr()</span><br><span class="line">top_corr_features = corrmat.index[<span class="built_in">abs</span>(corrmat[<span class="string">&quot;SalePrice&quot;</span>])&gt;=<span class="number">0.4</span>]</span><br><span class="line"><span class="comment">#히트맵</span></span><br><span class="line">plt.figure(figsize=(<span class="number">13</span>,<span class="number">10</span>))</span><br><span class="line">sns.heatmap(train[top_corr_features].corr(),annot=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;AxesSubplot:&gt;
</code></pre>
<p><img src="/images/house-0713/output_19_1.png" alt="png"></p>
<ul>
<li><p>OverallQual, GarageCars와 GarageArea(0.88), GrLiveArea와 TotRmsAbvGrd(0.82), TotalBsmtSF와 1stFlrSF(0.82), GarageYtBuilk와 YearBuilt(0.83),FullBath, YearRemodAdd인 것을 보았을 때 </p>
</li>
<li><p>OverallQual(0.79)&gt;GrLiveArea(0.71)&gt;GarageCars(0.64)&gt; TotalBsmtSF(0.61)&gt;YearBulit(0.52)&gt;FullBath(0.56)&gt;YearRemodAdd(0.51)만을 사용한다.</p>
</li>
<li><p>이중 TotalBsmtSF,GarageCars는 결측치가 있기에 채우도록 하자.</p>
</li>
<li><p>집재료 및 마감평가&gt;지상 거실 면적&gt; 차고대수 &gt; 지층 총면적 &gt; 건축연도 &gt; 전체욕실들 &gt; 리모델링 연도</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">fig, ((ax1, ax2), (ax3, ax4),(ax5,ax6)) = plt.subplots(nrows=<span class="number">3</span>, ncols=<span class="number">2</span>, figsize=(<span class="number">16</span>,<span class="number">13</span>)) </span><br><span class="line"><span class="comment"># SP - OverallQual</span></span><br><span class="line">OverallQual_scatter_plot = pd.concat([train[<span class="string">&#x27;SalePrice&#x27;</span>],train[<span class="string">&#x27;OverallQual&#x27;</span>]],axis = <span class="number">1</span>) </span><br><span class="line">sns.regplot(x=<span class="string">&#x27;OverallQual&#x27;</span>,y = <span class="string">&#x27;SalePrice&#x27;</span>,data = OverallQual_scatter_plot,scatter= <span class="literal">True</span>, fit_reg=<span class="literal">True</span>, ax=ax1) </span><br><span class="line"></span><br><span class="line"><span class="comment"># SP - TotalBsmtSF</span></span><br><span class="line">TotalBsmtSF_scatter_plot = pd.concat([train[<span class="string">&#x27;SalePrice&#x27;</span>],train[<span class="string">&#x27;TotalBsmtSF&#x27;</span>]],axis = <span class="number">1</span>) </span><br><span class="line">sns.regplot(x=<span class="string">&#x27;TotalBsmtSF&#x27;</span>,y = <span class="string">&#x27;SalePrice&#x27;</span>,data = TotalBsmtSF_scatter_plot,scatter= <span class="literal">True</span>, fit_reg=<span class="literal">True</span>, ax=ax2) </span><br><span class="line"></span><br><span class="line"><span class="comment"># SP - GrLivArea</span></span><br><span class="line">GrLivArea_scatter_plot = pd.concat([train[<span class="string">&#x27;SalePrice&#x27;</span>],train[<span class="string">&#x27;GrLivArea&#x27;</span>]],axis = <span class="number">1</span>) </span><br><span class="line">sns.regplot(x=<span class="string">&#x27;GrLivArea&#x27;</span>,y = <span class="string">&#x27;SalePrice&#x27;</span>,data = GrLivArea_scatter_plot,scatter= <span class="literal">True</span>, fit_reg=<span class="literal">True</span>, ax=ax3) </span><br><span class="line"></span><br><span class="line"><span class="comment"># SP - GarageCars</span></span><br><span class="line">GarageCars_scatter_plot = pd.concat([train[<span class="string">&#x27;SalePrice&#x27;</span>],train[<span class="string">&#x27;GarageCars&#x27;</span>]],axis = <span class="number">1</span>) </span><br><span class="line">sns.regplot(x=<span class="string">&#x27;GarageCars&#x27;</span>,y = <span class="string">&#x27;SalePrice&#x27;</span>,data = GarageCars_scatter_plot,scatter= <span class="literal">True</span>, fit_reg=<span class="literal">True</span>, ax=ax4) </span><br><span class="line"></span><br><span class="line"><span class="comment"># SP - FullBath</span></span><br><span class="line">FullBath_scatter_plot = pd.concat([train[<span class="string">&#x27;SalePrice&#x27;</span>],train[<span class="string">&#x27;FullBath&#x27;</span>]],axis = <span class="number">1</span>) </span><br><span class="line">sns.regplot(x=<span class="string">&#x27;FullBath&#x27;</span>,y = <span class="string">&#x27;SalePrice&#x27;</span>,data = FullBath_scatter_plot,scatter= <span class="literal">True</span>, fit_reg=<span class="literal">True</span>, ax=ax5) </span><br><span class="line"></span><br><span class="line"><span class="comment"># SP - YearBuilt</span></span><br><span class="line">YearBuilt_scatter_plot = pd.concat([train[<span class="string">&#x27;SalePrice&#x27;</span>],train[<span class="string">&#x27;YearBuilt&#x27;</span>]],axis = <span class="number">1</span>) </span><br><span class="line">sns.regplot(x=<span class="string">&#x27;YearBuilt&#x27;</span>,y = <span class="string">&#x27;SalePrice&#x27;</span>,data = YearBuilt_scatter_plot,scatter= <span class="literal">True</span>, fit_reg=<span class="literal">True</span>, ax=ax6) </span><br><span class="line"></span><br><span class="line"><span class="comment"># SP - YearRemodAdd</span></span><br><span class="line">YearRemodAdd_scatter_plot = pd.concat([train[<span class="string">&#x27;SalePrice&#x27;</span>],train[<span class="string">&#x27;YearRemodAdd&#x27;</span>]],axis = <span class="number">1</span>) </span><br><span class="line">YearRemodAdd_scatter_plot.plot.scatter(<span class="string">&#x27;YearRemodAdd&#x27;</span>,<span class="string">&#x27;SalePrice&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>




<pre><code>&lt;AxesSubplot:xlabel=&#39;YearRemodAdd&#39;, ylabel=&#39;SalePrice&#39;&gt;
</code></pre>
<p><img src="/images/house-0713/output_21_1.png" alt="png"></p>
<p><img src="/images/house-0713/output_21_2.png" alt="png"></p>
<ul>
<li>OverallQual, GarageCars, FullBath는 범주형의 형태</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">fig, ax = plt.subplots(nrows = <span class="number">1</span>, ncols = <span class="number">3</span>)</span><br><span class="line">fig.tight_layout()</span><br><span class="line">fig.set_size_inches(<span class="number">15</span>, <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">sns.boxplot(x = <span class="string">&#x27;OverallQual&#x27;</span>, y = <span class="string">&#x27;SalePrice&#x27;</span>, data = train, ax=ax[<span class="number">0</span>])</span><br><span class="line">sns.boxplot(x = <span class="string">&#x27;GarageCars&#x27;</span>,y = <span class="string">&#x27;SalePrice&#x27;</span>, data = train, ax=ax[<span class="number">1</span>])</span><br><span class="line">sns.boxplot(x = <span class="string">&#x27;FullBath&#x27;</span>, y = <span class="string">&#x27;SalePrice&#x27;</span>, data = train, ax=ax[<span class="number">2</span>])</span><br><span class="line"></span><br><span class="line">ax[<span class="number">0</span>].set_title(<span class="string">&quot;OverallQualr&quot;</span>)</span><br><span class="line">ax[<span class="number">1</span>].set_title(<span class="string">&quot;GarageCars&quot;</span>)</span><br><span class="line">ax[<span class="number">2</span>].set_title(<span class="string">&quot;FullBath&quot;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/images/house-0713/output_23_0.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##### 범주형 변수와 가격사이의 비교</span></span><br><span class="line">figure, ((ax1,ax2,ax3,ax4), (ax5,ax6,ax7,ax8)) = plt.subplots(nrows=<span class="number">2</span>, ncols=<span class="number">4</span>)</span><br><span class="line">figure.set_size_inches(<span class="number">18</span>,<span class="number">8</span>)</span><br><span class="line"></span><br><span class="line">sns.barplot(data=train, x=<span class="string">&quot;MSSubClass&quot;</span>, y=<span class="string">&quot;SalePrice&quot;</span>, ax=ax1)</span><br><span class="line">sns.barplot(data=train, x=<span class="string">&quot;LotShape&quot;</span>, y=<span class="string">&quot;SalePrice&quot;</span>, ax=ax2)</span><br><span class="line">sns.barplot(data=train, x=<span class="string">&quot;BldgType&quot;</span>, y=<span class="string">&quot;SalePrice&quot;</span>, ax=ax3)</span><br><span class="line">sns.barplot(data=train, x=<span class="string">&quot;HouseStyle&quot;</span>, y=<span class="string">&quot;SalePrice&quot;</span>, ax=ax4)</span><br><span class="line">sns.barplot(data=train, x=<span class="string">&quot;KitchenAbvGr&quot;</span>, y=<span class="string">&quot;SalePrice&quot;</span>, ax=ax5)</span><br><span class="line">sns.barplot(data=train, x=<span class="string">&quot;Functional&quot;</span>, y=<span class="string">&quot;SalePrice&quot;</span>, ax=ax6)</span><br><span class="line">sns.barplot(data=train, x=<span class="string">&quot;SaleType&quot;</span>, y=<span class="string">&quot;SalePrice&quot;</span>, ax=ax7)</span><br><span class="line">sns.barplot(data=train, x=<span class="string">&quot;SaleCondition&quot;</span>, y=<span class="string">&quot;SalePrice&quot;</span>, ax=ax8)</span><br><span class="line"></span><br><span class="line"><span class="comment">#ax1.set(ylabel=&#x27;주거타입&#x27;,title=&quot;연도별 가격&quot;)</span></span><br><span class="line"><span class="comment"># ax2.set(xlabel=&#x27;부지모양&#x27;,title=&quot;월별 가격&quot;)</span></span><br><span class="line"><span class="comment"># ax3.set(xlabel=&#x27;주거 타입&#x27;, title=&quot;일별 가격&quot;)</span></span><br><span class="line"><span class="comment"># ax4.set(xlabel=&#x27;주거 스타일&#x27;, title=&quot;시간별 가격&quot;)</span></span><br><span class="line"><span class="comment"># ax4.set(xlabel=&#x27;최초공사년도&#x27;, title=&quot;시간별 가격&quot;)</span></span><br><span class="line"><span class="comment"># ax4.set(xlabel=&#x27;리모델링년도&#x27;, title=&quot;시간별 가격&quot;)</span></span><br></pre></td></tr></table></figure>




<pre><code>&lt;AxesSubplot:xlabel=&#39;SaleCondition&#39;, ylabel=&#39;SalePrice&#39;&gt;
</code></pre>
<p><img src="/images/house-0713/output_24_1.png" alt="png"></p>
<h2 id="STEP5-데이터-전처리"><a href="#STEP5-데이터-전처리" class="headerlink" title="STEP5. 데이터 전처리"></a>STEP5. 데이터 전처리</h2><ul>
<li></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 데이터 ID값 제거</span></span><br><span class="line">train_ID = train[<span class="string">&#x27;Id&#x27;</span>]</span><br><span class="line">test_ID = test[<span class="string">&#x27;Id&#x27;</span>]</span><br><span class="line"></span><br><span class="line">train_t = train.drop([<span class="string">&#x27;Id&#x27;</span>], axis = <span class="number">1</span>)</span><br><span class="line">test_t = test.drop([<span class="string">&#x27;Id&#x27;</span>], axis = <span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(train_t.shape,test_t.shape)</span><br></pre></td></tr></table></figure>

<pre><code>(1460, 80) (1459, 79)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#로그 안된 세일가격포함 데이터 합치기</span></span><br><span class="line">all_ds = pd.concat([train_t, test_t]).reset_index(drop=<span class="literal">True</span>)</span><br><span class="line">all_ds.shape</span><br></pre></td></tr></table></figure>




<pre><code>(2919, 80)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GrLivArea_scatter_plot = pd.concat([train[<span class="string">&#x27;SalePrice&#x27;</span>],train[<span class="string">&#x27;GrLivArea&#x27;</span>]],axis = <span class="number">1</span>) </span><br><span class="line">sns.regplot(x=<span class="string">&#x27;GrLivArea&#x27;</span>,y = <span class="string">&#x27;SalePrice&#x27;</span>,data = GrLivArea_scatter_plot,scatter= <span class="literal">True</span>, fit_reg=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;AxesSubplot:xlabel=&#39;GrLivArea&#39;, ylabel=&#39;SalePrice&#39;&gt;
</code></pre>
<p><img src="/images/house-0713/output_28_1.png" alt="png"></p>
<ul>
<li>왼쪽 2개는 이상치인데 제거해야하나 말아야 하나….</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 로그변환을 함. </span></span><br><span class="line">train[<span class="string">&#x27;SalePrice&#x27;</span>] = np.log1p(train[<span class="string">&#x27;SalePrice&#x27;</span>])</span><br><span class="line"></span><br><span class="line">(mu, sigma) = norm.fit(train[<span class="string">&#x27;SalePrice&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;평균:&quot;</span>, mu)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;표준편차:&quot;</span>, sigma)</span><br><span class="line"></span><br><span class="line">fig, ax = plt.subplots(figsize=(<span class="number">10</span>, <span class="number">6</span>))</span><br><span class="line">sns.histplot(train[<span class="string">&#x27;SalePrice&#x27;</span>])</span><br><span class="line">ax.<span class="built_in">set</span>(title=<span class="string">&quot;SalePrice Distribution&quot;</span>)</span><br><span class="line">ax.axvline(mu, color = <span class="string">&#x27;r&#x27;</span>, linestyle = <span class="string">&#x27;--&#x27;</span>)</span><br><span class="line">ax.text(mu + <span class="number">0.0001</span>, <span class="number">160</span>, <span class="string">&#x27;Mean of SalePrice&#x27;</span>, color = <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">ax.set_ylim(<span class="number">0</span>, <span class="number">170</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<pre><code>평균: 12.024057394918406
표준편차: 0.39931245219387496
</code></pre>
<p><img src="/images/house-0713/output_30_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># y값 추출 -&gt; train 데이터에서 saleprice만 따로 저장</span></span><br><span class="line">y = train[<span class="string">&#x27;SalePrice&#x27;</span>]</span><br><span class="line">train_t = train_t.drop(<span class="string">&#x27;SalePrice&#x27;</span>, axis = <span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(train_t.shape)</span><br></pre></td></tr></table></figure>

<pre><code>(1460, 79)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 데이터 합치기</span></span><br><span class="line">all_df = pd.concat([train_t, test_t]).reset_index(drop=<span class="literal">True</span>)</span><br><span class="line">all_df.shape</span><br></pre></td></tr></table></figure>




<pre><code>(2919, 79)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 결측치 확인</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">check_na</span>(<span class="params">data, head_num = <span class="number">6</span></span>):</span><br><span class="line">  isnull_na = (data.isnull().<span class="built_in">sum</span>() / <span class="built_in">len</span>(data)) * <span class="number">100</span></span><br><span class="line">  data_na = isnull_na.drop(isnull_na[isnull_na == <span class="number">0</span>].index).sort_values(ascending=<span class="literal">False</span>)</span><br><span class="line">  missing_data = pd.DataFrame(&#123;<span class="string">&#x27;Missing Ratio&#x27;</span> :data_na, </span><br><span class="line">                               <span class="string">&#x27;Data Type&#x27;</span>: data.dtypes[data_na.index]&#125;)</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;결측치 데이터 컬럼과 건수:\n&quot;</span>, missing_data.head(head_num))</span><br><span class="line"></span><br><span class="line">check_na(all_df, <span class="number">20</span>)</span><br></pre></td></tr></table></figure>

<pre><code>결측치 데이터 컬럼과 건수:
               Missing Ratio Data Type
PoolQC            99.657417    object
MiscFeature       96.402878    object
Alley             93.216855    object
Fence             80.438506    object
FireplaceQu       48.646797    object
LotFrontage       16.649538   float64
GarageFinish       5.447071    object
GarageQual         5.447071    object
GarageCond         5.447071    object
GarageYrBlt        5.447071   float64
GarageType         5.378554    object
BsmtExposure       2.809181    object
BsmtCond           2.809181    object
BsmtQual           2.774923    object
BsmtFinType2       2.740665    object
BsmtFinType1       2.706406    object
MasVnrType         0.822199    object
MasVnrArea         0.787941   float64
MSZoning           0.137033    object
BsmtFullBath       0.068517   float64
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 필요한 데이터 컬럼만 모음</span></span><br><span class="line">all_df1 = all_df[[<span class="string">&#x27;OverallQual&#x27;</span>,<span class="string">&#x27;GrLivArea&#x27;</span>,<span class="string">&#x27;GarageCars&#x27;</span>,</span><br><span class="line">                  <span class="string">&#x27;TotalBsmtSF&#x27;</span>,<span class="string">&#x27;YearBuilt&#x27;</span>,<span class="string">&#x27;FullBath&#x27;</span>,<span class="string">&#x27;YearRemodAdd&#x27;</span>]]</span><br><span class="line"><span class="built_in">print</span>(all_df1.shape)</span><br><span class="line">check_na(all_df1, <span class="number">20</span>)</span><br></pre></td></tr></table></figure>

<pre><code>(2919, 7)
결측치 데이터 컬럼과 건수:
              Missing Ratio Data Type
GarageCars        0.034258   float64
TotalBsmtSF       0.034258   float64
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#import numpy as np</span></span><br><span class="line"><span class="comment"># 이번에는 수치형 데이터만 추출한다. </span></span><br><span class="line">num_all_vars = <span class="built_in">list</span>(all_df1.select_dtypes(include=[np.number]))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;The whole number of all_vars&quot;</span>, <span class="built_in">len</span>(num_all_vars))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 이번에는 수치형 데이터의 평균이 아닌 중간값을 지정했다. </span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> num_all_vars:</span><br><span class="line">  <span class="comment"># all_df1[i].fillna(value=all_df1[i].median(), inplace=True)</span></span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line">    all_df1[i] = all_df1[i].fillna(value=all_df1[i].median())  </span><br><span class="line">check_na(all_df1, <span class="number">20</span>)</span><br></pre></td></tr></table></figure>

<pre><code>The whole number of all_vars 7
OverallQual
GrLivArea
GarageCars
TotalBsmtSF
YearBuilt
FullBath
YearRemodAdd
결측치 데이터 컬럼과 건수:
 Empty DataFrame
Columns: [Missing Ratio, Data Type]
Index: []


/opt/conda/lib/python3.7/site-packages/ipykernel_launcher.py:10: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  # Remove the CWD from sys.path while we load stuff.
/opt/conda/lib/python3.7/site-packages/ipykernel_launcher.py:10: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  # Remove the CWD from sys.path while we load stuff.
/opt/conda/lib/python3.7/site-packages/ipykernel_launcher.py:10: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  # Remove the CWD from sys.path while we load stuff.
/opt/conda/lib/python3.7/site-packages/ipykernel_launcher.py:10: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  # Remove the CWD from sys.path while we load stuff.
/opt/conda/lib/python3.7/site-packages/ipykernel_launcher.py:10: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  # Remove the CWD from sys.path while we load stuff.
/opt/conda/lib/python3.7/site-packages/ipykernel_launcher.py:10: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  # Remove the CWD from sys.path while we load stuff.
/opt/conda/lib/python3.7/site-packages/ipykernel_launcher.py:10: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  # Remove the CWD from sys.path while we load stuff.
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">all_df1.info()</span><br></pre></td></tr></table></figure>

<pre><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 2919 entries, 0 to 2918
Data columns (total 7 columns):
 #   Column        Non-Null Count  Dtype  
---  ------        --------------  -----  
 0   OverallQual   2919 non-null   int64  
 1   GrLivArea     2919 non-null   int64  
 2   GarageCars    2919 non-null   float64
 3   TotalBsmtSF   2919 non-null   float64
 4   YearBuilt     2919 non-null   int64  
 5   FullBath      2919 non-null   int64  
 6   YearRemodAdd  2919 non-null   int64  
dtypes: float64(2), int64(5)
memory usage: 159.8 KB
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cate_name = [<span class="string">&#x27;OverallQual&#x27;</span>,<span class="string">&#x27;GrLivArea&#x27;</span>,<span class="string">&#x27;YearBuilt&#x27;</span>,<span class="string">&#x27;FullBath&#x27;</span>,<span class="string">&#x27;YearRemodAdd&#x27;</span>]</span><br><span class="line"><span class="keyword">for</span> c <span class="keyword">in</span> cate_name:</span><br><span class="line">    all_df1[c] =all_df[c].astype(<span class="string">&#x27;category&#x27;</span>)</span><br><span class="line"></span><br><span class="line">all_df1.dtypes</span><br></pre></td></tr></table></figure>

<pre><code>/opt/conda/lib/python3.7/site-packages/ipykernel_launcher.py:3: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  This is separate from the ipykernel package so we can avoid doing imports until





OverallQual     category
GrLivArea       category
GarageCars       float64
TotalBsmtSF      float64
YearBuilt       category
FullBath        category
YearRemodAdd    category
dtype: object
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#One-hot Encoding</span></span><br><span class="line"><span class="comment">#all_df1 = pd.get_dummies(all_df).reset_index(drop=True)</span></span><br><span class="line"><span class="comment">#all_df1.shape</span></span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#train,test데이터 재분리</span></span><br><span class="line">X = all_df1.iloc[:<span class="built_in">len</span>(y),:]</span><br><span class="line">test1 = all_df1.iloc[<span class="built_in">len</span>(y):,:] </span><br><span class="line"></span><br><span class="line">X.shape, y.shape, test1.shape</span><br><span class="line"></span><br></pre></td></tr></table></figure>




<pre><code>((1460, 7), (1460,), (1459, 7))
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(y)<span class="comment">#-&gt;로그변환 확인</span></span><br></pre></td></tr></table></figure>

<pre><code>0       12.247699
1       12.109016
2       12.317171
3       11.849405
4       12.429220
          ...    
1455    12.072547
1456    12.254868
1457    12.493133
1458    11.864469
1459    11.901590
Name: SalePrice, Length: 1460, dtype: float64
</code></pre>
<h2 id="STEP-6-모델링"><a href="#STEP-6-모델링" class="headerlink" title="STEP 6.모델링"></a>STEP 6.모델링</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split, GridSearchCV</span><br><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LinearRegression, Ridge</span><br><span class="line"><span class="keyword">from</span> xgboost <span class="keyword">import</span> XGBRegressor</span><br><span class="line"><span class="keyword">from</span> sklearn.ensemble <span class="keyword">import</span> RandomForestRegressor</span><br><span class="line"><span class="keyword">from</span> lightgbm <span class="keyword">import</span> LGBMRegressor</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> mean_squared_error</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> cross_validate</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> GridSearchCV</span><br><span class="line"><span class="keyword">from</span> sklearn.pipeline <span class="keyword">import</span> Pipeline, make_pipeline</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> StandardScaler</span><br><span class="line">ss=StandardScaler()</span><br><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> MinMaxScaler</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 선형회귀모델</span></span><br><span class="line">lr_reg = LinearRegression()</span><br><span class="line"><span class="comment"># 피처에 대한 표준화 진행과 K-fold를 함께 진행</span></span><br><span class="line">pipe = make_pipeline(MinMaxScaler(),lr_reg)</span><br><span class="line">scores = cross_validate(pipe,X,y,cv=<span class="number">5</span>,</span><br><span class="line">                        scoring=<span class="string">&#x27;neg_mean_squared_error&#x27;</span>,return_train_score =<span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;MSLE: &#123;0:.3f&#125;&quot;</span>.<span class="built_in">format</span>(np.mean(-scores[<span class="string">&#x27;test_score&#x27;</span>])))</span><br></pre></td></tr></table></figure>

<pre><code>MSLE: 0.030
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#rf랜덤포레스트</span></span><br><span class="line">np.random.seed(<span class="number">0</span>)</span><br><span class="line">rf = RandomForestRegressor(n_estimators = <span class="number">300</span>)</span><br><span class="line"><span class="comment"># 피처에 대한 표준화 진행과 K-fold를 함께 진행</span></span><br><span class="line">pipe = make_pipeline(MinMaxScaler(),rf)</span><br><span class="line">scores = cross_validate(pipe,X,y,cv=<span class="number">5</span>,</span><br><span class="line">                        scoring=<span class="string">&#x27;neg_mean_squared_error&#x27;</span>,return_train_score =<span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;MSLE: &#123;0:.3f&#125;&quot;</span>.<span class="built_in">format</span>(np.mean(-scores[<span class="string">&#x27;test_score&#x27;</span>])))</span><br></pre></td></tr></table></figure>

<pre><code>MSLE: 0.026
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#LGBM</span></span><br><span class="line">lgbm = LGBMRegressor(n_estimators = <span class="number">500</span>, objective = <span class="string">&#x27;regression&#x27;</span>)</span><br><span class="line"><span class="comment"># 피처에 대한 표준화 진행과 K-fold를 함께 진행</span></span><br><span class="line">pipe = make_pipeline(MinMaxScaler(),lgbm)</span><br><span class="line">scores = cross_validate(pipe,X,y,cv=<span class="number">5</span>,</span><br><span class="line">                        scoring=<span class="string">&#x27;neg_mean_squared_error&#x27;</span>,return_train_score =<span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;MSLE: &#123;0:.3f&#125;&quot;</span>.<span class="built_in">format</span>(np.mean(-scores[<span class="string">&#x27;test_score&#x27;</span>])))</span><br></pre></td></tr></table></figure>

<pre><code>MSLE: 0.031
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 하이퍼 파라미터 튜닝</span></span><br><span class="line"><span class="comment">#pipeline = Pipeline([(&#x27;scaler&#x27;,MinMaxScaler()),(&#x27;lgbm&#x27;,LGBMRegressor(objective=&#x27;regression&#x27;))])</span></span><br><span class="line"><span class="comment">#params=&#123;&#x27;lgbm__learnin_rate&#x27;:[0.001,0.01,0.1],</span></span><br><span class="line"><span class="comment">#       &#x27;lgbm__max_depth&#x27;:[5,10],</span></span><br><span class="line"><span class="comment">#       &#x27;lgbm__reg_lambda&#x27;:[0.1,1],</span></span><br><span class="line"><span class="comment">#       &#x27;lgbm__subsample&#x27;:[0.5,1],</span></span><br><span class="line"><span class="comment">#       &#x27;lgbm__n_estimators&#x27;:[500,1000]&#125;</span></span><br><span class="line"><span class="comment">#grid_model = GridSearchCV(pipeline,param_grid=params,scoring=&#x27;neg_mean_squared_error&#x27;,</span></span><br><span class="line"><span class="comment">#                         cv=5, n_jobs=5,verbose=True)</span></span><br><span class="line"><span class="comment">#grid_model.fit(X,y)</span></span><br><span class="line"><span class="comment">#print(&quot;MSLE:&#123;0:.3f&#125;&quot;.format(-1*grid_model.best_score_))</span></span><br><span class="line"><span class="comment">#print(&#x27;optimal hyperparameter:&#x27;,grid_model.best_params_)</span></span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 피쳐 표준화</span></span><br><span class="line">minmax = MinMaxScaler()</span><br><span class="line">minmax.fit(X) <span class="comment"># 훈련셋 모수 분포 저장</span></span><br><span class="line">X_scaled = minmax.transform(X)</span><br><span class="line">X_test_scaled = minmax.transform(test1)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 최종파라미터 튜닝된 모델로 학습</span></span><br><span class="line">lgbm = LGBMRegressor(n_estimators = <span class="number">500</span>, objective = <span class="string">&#x27;regression&#x27;</span>,</span><br><span class="line">                     learning_rate = <span class="number">0.06</span>, max_depth = <span class="number">3</span>, reg_lambda =<span class="number">1</span> ,subsample = <span class="number">0.52</span>, </span><br><span class="line">                     random_state = <span class="number">7</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 학습</span></span><br><span class="line">lgbm.fit(X_scaled, y)</span><br></pre></td></tr></table></figure>




<pre><code>LGBMRegressor(learning_rate=0.06, max_depth=3, n_estimators=500,
              objective=&#39;regression&#39;, random_state=7, reg_lambda=1,
              subsample=0.52)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># test1에 대한 예측</span></span><br><span class="line">pred = lgbm.predict(X_test_scaled)</span><br><span class="line">fpred = np.expm1(pred)<span class="comment"># 로그변환을 풀어줌</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#lgbm 모델의 feature importance</span></span><br><span class="line">imp = pd.DataFrame(&#123;<span class="string">&#x27;feature&#x27;</span>: test1.columns,</span><br><span class="line">                   <span class="string">&#x27;coefficient&#x27;</span>:lgbm.feature_importances_&#125;)</span><br><span class="line">imp = imp.sort_values(by = <span class="string">&#x27;coefficient&#x27;</span>, ascending = <span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">plt.barh(imp[<span class="string">&#x27;feature&#x27;</span>],imp[<span class="string">&#x27;coefficient&#x27;</span>])</span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p><img src="/images/house-0713/output_49_0.png" alt="png"></p>
<h2 id="STEP7-제출"><a href="#STEP7-제출" class="headerlink" title="STEP7. 제출"></a>STEP7. 제출</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">del</span> submission[<span class="string">&#x27;SalePrice&#x27;</span>]</span><br><span class="line">submission[<span class="string">&#x27;SalePrice&#x27;</span>] =fpred</span><br><span class="line"></span><br><span class="line">submission.to_csv(<span class="string">&#x27;submission.csv&#x27;</span>,index=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">submission.head()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Id</th>
      <th>SalePrice</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1461</td>
      <td>118146.965100</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1462</td>
      <td>144152.058709</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1463</td>
      <td>169665.837534</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1464</td>
      <td>178099.773825</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1465</td>
      <td>191088.830605</td>
    </tr>
  </tbody>
</table>
</div>


</div><div class="article-licensing box"><div class="licensing-title"><p><a href="https://westar99.github.io/2022/07/14/house-0713/">https://westar99.github.io/2022/07/14/house-0713/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>John Doe</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2022-07-14</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2022-07-14</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="notification is-danger">You need to set <code>install_url</code> to use ShareThis. Please set it in <code>_config.yml</code>.</div></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">Like this article? Support the author with</h3><div class="buttons is-centered"><a class="button donate" href="/" target="_blank" rel="noopener" data-type="afdian"><span class="icon is-small"><i class="fas fa-charging-station"></i></span><span>Afdian.net</span></a><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>Alipay</span><span class="qrcode"><img src="/" alt="Alipay"></span></a><a class="button donate" href="/" target="_blank" rel="noopener" data-type="buymeacoffee"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>Buy me a coffee</span></a><a class="button donate" href="/" target="_blank" rel="noopener" data-type="patreon"><span class="icon is-small"><i class="fab fa-patreon"></i></span><span>Patreon</span></a><div class="notification is-danger">You forgot to set the <code>business</code> or <code>currency_code</code> for Paypal. Please set it in <code>_config.yml</code>.</div><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>Wechat</span><span class="qrcode"><img src="/" alt="Wechat"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2022/07/12/bikesd_220711/"><span class="level-item"> </span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><div class="notification is-danger">You forgot to set the <code>shortname</code> for Disqus. Please set it in <code>_config.yml</code>.</div></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.png" alt="CHAI JE HYUNG"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">CHAI JE HYUNG</p><p class="is-size-6 is-block">GOD IS GOOD ALL THE TIME</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>SEOUL.KOREA</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">24</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">0</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/westar99" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/westar99"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://www.facebook.com/jehyung.chai"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile" href="https://bulma.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bulma</span></span><span class="level-right"><span class="level-item tag">bulma.io</span></span></a></li></ul></div></div></div><!--!--><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-07-14T01:42:44.000Z">2022-07-14</time></p><p class="title"><a href="/2022/07/14/house-0713/"> </a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-07-12T07:06:22.000Z">2022-07-12</time></p><p class="title"><a href="/2022/07/12/bikesd_220711/"> </a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-07-08T08:22:44.000Z">2022-07-08</time></p><p class="title"><a href="/2022/07/08/day0708/"> </a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-07-07T08:05:34.000Z">2022-07-07</time></p><p class="title"><a href="/2022/07/07/lecture_in_humanedu/"> </a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-07-06T07:38:20.000Z">2022-07-06</time></p><p class="title"><a href="/2022/07/06/day0706/"> </a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2022/07/"><span class="level-start"><span class="level-item">July 2022</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/06/"><span class="level-start"><span class="level-item">June 2022</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li></ul></div></div></div><!--!--><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe for updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget"><div class="card-content"><div class="notification is-danger">You need to set <code>client_id</code> and <code>slot_id</code> to show this AD unit. Please set it in <code>_config.yml</code>.</div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="CHAI JEHYUNG" height="28"></a><p class="is-size-7"><span>&copy; 2022 John Doe</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>